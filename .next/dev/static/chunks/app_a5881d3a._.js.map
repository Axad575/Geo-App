{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdul/OneDrive/Desktop/GeoNote/geo-app/app/api/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\n\r\n\r\n// Проверяем наличие переменных окружения\r\nif (!process.env.NEXT_PUBLIC_FIREBASE_API_KEY) {\r\n  throw new Error('Firebase configuration is missing. Please check your .env.local file.');\r\n}\r\n\r\n// Your web app's Firebase configuration using environment variables\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Cloud Firestore and get a reference to the service\r\nconst db = getFirestore(app);\r\n\r\n// Initialize Firebase Authentication and get a reference to the service\r\nconst auth = getAuth(app);\r\n\r\n// Initialize Cloud Storage and get a reference to the service\r\nconst storage = getStorage(app);\r\n\r\n// Initialize Analytics only on client side and if supported\r\nlet analytics = null;\r\nif (typeof window !== 'undefined') {\r\n  isSupported().then((supported) => {\r\n    if (supported) {\r\n      analytics = getAnalytics(app);\r\n    }\r\n  }).catch((error) => {\r\n    console.warn('Firebase Analytics not supported:', error);\r\n  });\r\n}\r\n\r\nexport { app, db, auth, storage, analytics };\r\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;;;;;;;AAUlD;AATL;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAIA,yCAAyC;AACzC;;AAIA,oEAAoE;AACpE,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,oLAAa,EAAC;AAE1B,gEAAgE;AAChE,MAAM,KAAK,IAAA,kLAAY,EAAC;AAExB,wEAAwE;AACxE,MAAM,OAAO,IAAA,wKAAO,EAAC;AAErB,8DAA8D;AAC9D,MAAM,UAAU,IAAA,8KAAU,EAAC;AAE3B,4DAA4D;AAC5D,IAAI,YAAY;AAChB,wCAAmC;IACjC,IAAA,wLAAW,IAAG,IAAI,CAAC,CAAC;QAClB,IAAI,WAAW;YACb,YAAY,IAAA,yLAAY,EAAC;QAC3B;IACF,GAAG,KAAK,CAAC,CAAC;QACR,QAAQ,IAAI,CAAC,qCAAqC;IACpD;AACF","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdul/OneDrive/Desktop/GeoNote/geo-app/app/page.js"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\nimport { sendEmailVerification } from \"firebase/auth\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { app, db } from \"./api/firebase\";\nimport { useStrings } from \"./hooks/useStrings\";\n\n\nexport default function Home() {\n  const router = useRouter();\n  const auth = getAuth(app);\n  \n  const { t } = useStrings();\n  const [isLogin, setIsLogin] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    // Проверяем, что мы в браузере\n    if (typeof window !== \"undefined\") {\n      import(\"firebase/analytics\").then(({ getAnalytics }) => {\n        const analytics = getAnalytics(app);\n        console.log(\"Firebase Analytics initialized:\", analytics);\n      });\n    }\n  }, []);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    const email = e.target.email.value;\n    const password = e.target.password.value;\n    setLoading(true);\n    \n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      while (auth.currentUser) {\n        if (!auth.currentUser.emailVerified) {\n          await sendEmailVerification(auth.currentUser);\n          window.alert(t('auth.emailVerification'));\n          await auth.signOut();\n          router.push('/');\n        } else {\n          router.push('/pages/homeScreen');\n        }\n        break;\n      }\n    } catch (error) {\n      window.alert(t('auth.loginError') + ': ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n    const name = e.target.name.value;\n    const email = e.target.email.value;\n    const password = e.target.password.value;\n    const confirmPassword = e.target.confirmPassword.value;\n\n    if (password !== confirmPassword) {\n      window.alert(t('auth.passwordMismatch'));\n      return;\n    }\n\n    if (password.length < 6) {\n      window.alert(t('auth.passwordTooShort'));\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      // Создаем пользователя\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n\n      // Обновляем профиль пользователя\n      await updateProfile(user, {\n        displayName: name\n      });\n\n      // Сохраняем данные пользователя в Firestore\n      await setDoc(doc(db, 'users', user.uid), {\n        name: name,\n        email: email,\n        createdAt: new Date(),\n        role: 'user',\n        organizationId: null\n      });\n\n      // Отправляем письмо для подтверждения\n      await sendEmailVerification(user);\n      \n      window.alert(t('auth.registerSuccess') + ' ' + t('auth.emailVerification'));\n      await auth.signOut();\n      setIsLogin(true); // Переключаем на форму входа\n      \n    } catch (error) {\n      window.alert(t('auth.registerError') + ': ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-screen flex-col items-center justify-between p-24 bg-white dark:bg-gray-900\">\n      <div className=\"w-1/3 border-2 border-gray-300 dark:border-gray-600 rounded-xl shadow-lg bg-white dark:bg-gray-800\">\n      <h1 className=\"text-3xl font-semibold text-center rounded-t-xl p-4 bg-green-800 text-white  mb-10\"> Geo-App</h1>\n      <form onSubmit={handleLogin} className=\"flex flex-col space-y-4 p-4\">\n        <h2 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">{t('auth.email')}:</h2>\n        <input\n          type=\"email\"\n          placeholder={t('auth.emailPlaceholder')}\n          className=\"border border-gray-300 dark:border-gray-600 p-2 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400\"\n          id=\"email\" name=\"email\" required\n        />\n        <h2 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">{t('auth.password')}:</h2>\n        <input\n          type=\"password\"\n          placeholder={t('auth.passwordPlaceholder')}\n          className=\"border border-gray-300 dark:border-gray-600 p-2 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400\"\n          id=\"password\" name=\"password\" required\n        />\n        <button\n          type=\"submit\"\n          className=\"bg-green-800 text-white p-2 rounded hover:bg-green-700 mb-4\"\n        >\n          {t('auth.login')}\n        </button>\n        <p className=\"text-sm text-center text-gray-600 dark:text-gray-400\">{t('auth.termsText')}</p>\n        <p className=\"text-sm text-center text-gray-600 dark:text-gray-400\">© 2025</p>\n      </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}
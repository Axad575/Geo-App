{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdul/OneDrive/Desktop/GeoNote/geo-app/app/api/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\n\r\n\r\n// Проверяем наличие переменных окружения\r\nif (!process.env.NEXT_PUBLIC_FIREBASE_API_KEY) {\r\n  throw new Error('Firebase configuration is missing. Please check your .env.local file.');\r\n}\r\n\r\n// Your web app's Firebase configuration using environment variables\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize Cloud Firestore and get a reference to the service\r\nconst db = getFirestore(app);\r\n\r\n// Initialize Firebase Authentication and get a reference to the service\r\nconst auth = getAuth(app);\r\n\r\n// Initialize Cloud Storage and get a reference to the service\r\nconst storage = getStorage(app);\r\n\r\n// Initialize Analytics only on client side and if supported\r\nlet analytics = null;\r\nif (typeof window !== 'undefined') {\r\n  isSupported().then((supported) => {\r\n    if (supported) {\r\n      analytics = getAnalytics(app);\r\n    }\r\n  }).catch((error) => {\r\n    console.warn('Firebase Analytics not supported:', error);\r\n  });\r\n}\r\n\r\nexport { app, db, auth, storage, analytics };\r\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;;;;;;;;AACvD;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;;;;;;AAIA,yCAAyC;AACzC;;AAIA,oEAAoE;AACpE,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,iLAAa,EAAC;AAE1B,gEAAgE;AAChE,MAAM,KAAK,IAAA,iLAAY,EAAC;AAExB,wEAAwE;AACxE,MAAM,OAAO,IAAA,6KAAO,EAAC;AAErB,8DAA8D;AAC9D,MAAM,UAAU,IAAA,kMAAU,EAAC;AAE3B,4DAA4D;AAC5D,IAAI,YAAY;AAChB","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/abdul/OneDrive/Desktop/GeoNote/geo-app/app/pages/noSubscription/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { getAuth, signOut } from \"firebase/auth\";\r\nimport { app, db } from \"@/app/api/firebase\";\r\nimport { doc, getDoc, collection, getDocs } from \"firebase/firestore\";\r\n\r\nexport default function NoSubscription() {\r\n    const router = useRouter();\r\n    const auth = getAuth(app);\r\n    const [loading, setLoading] = useState(true);\r\n    const [orgName, setOrgName] = useState('');\r\n    const [subscription, setSubscription] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchOrgAndSubscription = async () => {\r\n            const user = auth.currentUser;\r\n            if (!user) {\r\n                router.push('/');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Находим организацию пользователя\r\n                const organizationsSnapshot = await getDocs(collection(db, 'organizations'));\r\n                \r\n                for (const orgDoc of organizationsSnapshot.docs) {\r\n                    const userInOrgDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/users/${user.uid}`));\r\n                    if (userInOrgDoc.exists()) {\r\n                        setOrgName(orgDoc.data().name || 'Вашей организации');\r\n                        \r\n                        // Получаем подписку\r\n                        const subDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/subscription/current`));\r\n                        if (subDoc.exists()) {\r\n                            setSubscription(subDoc.data());\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching subscription:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchOrgAndSubscription();\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await signOut(auth);\r\n            router.push('/');\r\n        } catch (error) {\r\n            console.error('Error signing out:', error);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return 'не указана';\r\n        return new Date(dateString).toLocaleDateString('ru-RU', {\r\n            day: '2-digit',\r\n            month: 'long',\r\n            year: 'numeric'\r\n        });\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <div className=\"text-xl text-gray-600\">Загрузка...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-linear-to-br from-red-50 to-orange-50 p-4\">\r\n            <div className=\"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8\">\r\n                {/* Icon */}\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <div className=\"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center\">\r\n                        <svg className=\"w-12 h-12 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <h1 className=\"text-3xl font-bold text-center text-gray-900 mb-4\">\r\n                    Доступ ограничен\r\n                </h1>\r\n\r\n                {/* Message */}\r\n                <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-6\">\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex shrink-0\">\r\n                            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div className=\"ml-3\">\r\n                            <p className=\"text-sm text-red-700 font-medium\">\r\n                                {subscription?.endDate && new Date(subscription.endDate) < new Date()\r\n                                    ? `Подписка ${orgName} истекла ${formatDate(subscription.endDate)}`\r\n                                    : `У ${orgName} отсутствует активная подписка`}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Details */}\r\n                <div className=\"space-y-4 mb-8\">\r\n                    <p className=\"text-gray-600 text-center\">\r\n                        Для доступа к системе необходима активная подписка на сервис GeoNote.\r\n                    </p>\r\n                    \r\n                    {subscription && (\r\n                        <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\r\n                            <div className=\"flex justify-between text-sm\">\r\n                                <span className=\"text-gray-600\">Статус:</span>\r\n                                <span className=\"font-semibold text-red-600\">\r\n                                    {subscription.endDate && new Date(subscription.endDate) < new Date() ? 'Истекла' : 'Не активна'}\r\n                                </span>\r\n                            </div>\r\n                            {subscription.endDate && (\r\n                                <div className=\"flex justify-between text-sm\">\r\n                                    <span className=\"text-gray-600\">Дата окончания:</span>\r\n                                    <span className=\"font-semibold text-gray-900\">{formatDate(subscription.endDate)}</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6\">\r\n                        <h3 className=\"font-semibold text-blue-900 mb-2\">Что делать?</h3>\r\n                        <ul className=\"text-sm text-blue-800 space-y-1\">\r\n                            <li>• Свяжитесь с администратором вашей организации</li>\r\n                            <li>• Администратор может продлить подписку</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex justify-center\">\r\n                    <button\r\n                        onClick={handleLogout}\r\n                        className=\"px-8 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium\"\r\n                    >\r\n                        Выйти из системы\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"mt-8 pt-6 border-t text-center\">\r\n                    <p className=\"text-xs text-gray-500\">\r\n                        GeoNote © 2025 • Made by abdu1axad\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
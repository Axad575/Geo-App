{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/pages/noSubscription/page.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { getAuth, signOut } from \"firebase/auth\";\r\nimport { app, db } from \"@/app/api/firebase\";\r\nimport { doc, getDoc, collection, getDocs } from \"firebase/firestore\";\r\nimport { useStrings } from \"@/app/hooks/useStrings\";\r\n\r\nexport default function NoSubscription() {\r\n    const router = useRouter();\r\n    const auth = getAuth(app);\r\n    const { t } = useStrings();\r\n    const [loading, setLoading] = useState(true);\r\n    const [orgName, setOrgName] = useState('');\r\n    const [subscription, setSubscription] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchOrgAndSubscription = async () => {\r\n            const user = auth.currentUser;\r\n            if (!user) {\r\n                router.push('/');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const organizationsSnapshot = await getDocs(collection(db, 'organizations'));\r\n                \r\n                for (const orgDoc of organizationsSnapshot.docs) {\r\n                    const userInOrgDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/users/${user.uid}`));\r\n                    if (userInOrgDoc.exists()) {\r\n                        setOrgName(orgDoc.data().name || t('noSubscription.yourOrganization'));\r\n                        \r\n                        const subDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/subscription/current`));\r\n                        if (subDoc.exists()) {\r\n                            setSubscription(subDoc.data());\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching subscription:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchOrgAndSubscription();\r\n    }, []);\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            await signOut(auth);\r\n            router.push('/');\r\n        } catch (error) {\r\n            console.error('Error signing out:', error);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return t('noSubscription.notSpecified');\r\n        return new Date(dateString).toLocaleDateString('ru-RU', {\r\n            day: '2-digit',\r\n            month: 'long',\r\n            year: 'numeric'\r\n        });\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <div className=\"text-xl text-gray-600\">{t('noSubscription.loading')}</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const isExpired = subscription?.endDate && new Date(subscription.endDate) < new Date();\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-linear-to-br from-red-50 to-orange-50 p-4\">\r\n            <div className=\"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8\">\r\n                {/* Icon */}\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <div className=\"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center\">\r\n                        <svg className=\"w-12 h-12 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Title */}\r\n                <h1 className=\"text-3xl font-bold text-center text-gray-900 mb-4\">\r\n                    {t('noSubscription.accessRestricted')}\r\n                </h1>\r\n\r\n                {/* Message */}\r\n                <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-6\">\r\n                    <div className=\"flex\">\r\n                        <div className=\"flex shrink-0\">\r\n                            <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div className=\"ml-3\">\r\n                            <p className=\"text-sm text-red-700 font-medium\">\r\n                                {isExpired\r\n                                    ? t('noSubscription.subscriptionExpired')\r\n                                        .replace('{orgName}', orgName)\r\n                                        .replace('{date}', formatDate(subscription.endDate))\r\n                                    : t('noSubscription.noActiveSubscription').replace('{orgName}', orgName)}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Details */}\r\n                <div className=\"space-y-4 mb-8\">\r\n                    <p className=\"text-gray-600 text-center\">\r\n                        {t('noSubscription.accessRequirement')}\r\n                    </p>\r\n                    \r\n                    {subscription && (\r\n                        <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\r\n                            <div className=\"flex justify-between text-sm\">\r\n                                <span className=\"text-gray-600\">{t('noSubscription.status')}:</span>\r\n                                <span className=\"font-semibold text-red-600\">\r\n                                    {isExpired ? t('noSubscription.expired') : t('noSubscription.notActive')}\r\n                                </span>\r\n                            </div>\r\n                            {subscription.endDate && (\r\n                                <div className=\"flex justify-between text-sm\">\r\n                                    <span className=\"text-gray-600\">{t('noSubscription.endDate')}:</span>\r\n                                    <span className=\"font-semibold text-gray-900\">{formatDate(subscription.endDate)}</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6\">\r\n                        <h3 className=\"font-semibold text-blue-900 mb-2\">{t('noSubscription.whatToDo')}</h3>\r\n                        <ul className=\"text-sm text-blue-800 space-y-1\">\r\n                            <li>• {t('noSubscription.contactAdmin')}</li>\r\n                            <li>• {t('noSubscription.adminCanRenew')}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex justify-center\">\r\n                    <button\r\n                        onClick={handleLogout}\r\n                        className=\"px-8 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium\"\r\n                    >\r\n                        {t('noSubscription.logout')}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"mt-8 pt-6 border-t text-center\">\r\n                    <p className=\"text-xs text-gray-500\">\r\n                        {t('noSubscription.footer')}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}
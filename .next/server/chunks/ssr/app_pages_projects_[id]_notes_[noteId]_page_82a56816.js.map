{"version":3,"sources":["../../../../app/pages/projects/%5Bid%5D/notes/%5BnoteId%5D/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { app, db, storage } from '@/app/api/firebase';\r\nimport { doc, getDoc, collection, getDocs, updateDoc, arrayRemove, arrayUnion } from 'firebase/firestore';\r\nimport { ref, deleteObject } from 'firebase/storage';\r\nimport { useStrings } from \"@/app/hooks/useStrings\";\r\nimport InteractiveMap from '@/app/components/InteractiveMap';\r\n\r\nconst ViewNotePage = () => {\r\n    const { t } = useStrings();\r\n    const router = useRouter();\r\n    const params = useParams();\r\n    const auth = getAuth(app);\r\n    \r\n    const projectId = params.id;\r\n    const noteId = params.noteId;\r\n    const [orgId, setOrgId] = useState(null);\r\n    const [project, setProject] = useState(null);\r\n    const [note, setNote] = useState(null);\r\n    const [users, setUsers] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [deleting, setDeleting] = useState(false);\r\n\r\n    // –ü–æ–ª—É—á–∞–µ–º –ª–æ–∫–∞–ª—å –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã\r\n    const getCurrentLocale = () => {\r\n        if (typeof window === 'undefined') return 'ru-RU';\r\n        \r\n        const currentLanguage = localStorage.getItem('language') || 'ru';\r\n        const localeMap = {\r\n            'ru': 'ru-RU',\r\n            'en': 'en-US',\r\n            'uz': 'uz-UZ'\r\n        };\r\n        \r\n        return localeMap[currentLanguage] || 'ru-RU';\r\n    };\r\n\r\n    // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n    const getCurrentUserOrg = async (userId) => {\r\n        try {\r\n            const organizationsSnapshot = await getDocs(collection(db, 'organizations'));\r\n            \r\n            for (const orgDoc of organizationsSnapshot.docs) {\r\n                const userInOrgDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/users/${userId}`));\r\n                if (userInOrgDoc.exists()) {\r\n                    return orgDoc.id;\r\n                }\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error('Error fetching user organization:', error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞\r\n    const fetchProject = async (organizationId) => {\r\n        try {\r\n            const projectDoc = await getDoc(doc(db, `organizations/${organizationId}/projects/${projectId}`));\r\n            if (projectDoc.exists()) {\r\n                const projectData = { id: projectDoc.id, ...projectDoc.data() };\r\n                setProject(projectData);\r\n                \r\n                // –ù–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–º–µ—Ç–∫—É\r\n                const foundNote = projectData.notes?.find(n => n.id === noteId);\r\n                if (foundNote) {\r\n                    setNote(foundNote);\r\n                } else {\r\n                    console.error('Note not found');\r\n                    router.push(`/pages/projects/${projectId}`);\r\n                }\r\n            } else {\r\n                console.error('Project not found');\r\n                router.push('/pages/projects');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching project:', error);\r\n        }\r\n    };\r\n\r\n    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\r\n    const fetchUsers = async (organizationId) => {\r\n        try {\r\n            const usersSnapshot = await getDocs(collection(db, `organizations/${organizationId}/users`));\r\n            const usersMap = {};\r\n            usersSnapshot.docs.forEach(doc => {\r\n                usersMap[doc.id] = doc.data().name || doc.data().email;\r\n            });\r\n            setUsers(usersMap);\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const initPage = async () => {\r\n            const user = auth.currentUser;\r\n            if (!user) {\r\n                router.push('/auth/login');\r\n                return;\r\n            }\r\n\r\n            const userOrgId = await getCurrentUserOrg(user.uid);\r\n            if (userOrgId) {\r\n                setOrgId(userOrgId);\r\n                await fetchProject(userOrgId);\r\n                await fetchUsers(userOrgId);\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        initPage();\r\n    }, [projectId, noteId]);\r\n\r\n    const formatDate = (date) => {\r\n        if (!date) return '';\r\n        try {\r\n            const selectedLocale = getCurrentLocale();\r\n            return new Date(date).toLocaleDateString(selectedLocale, {\r\n                day: '2-digit',\r\n                month: '2-digit',\r\n                year: 'numeric',\r\n                hour: '2-digit',\r\n                minute: '2-digit'\r\n            });\r\n        } catch (error) {\r\n            return date;\r\n        }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ DMS —Ñ–æ—Ä–º–∞—Ç\r\n    const decimalToDMS = (decimal, isLatitude = true) => {\r\n        const absolute = Math.abs(decimal);\r\n        const degrees = Math.floor(absolute);\r\n        const minutes = Math.floor((absolute - degrees) * 60);\r\n        const seconds = Math.round(((absolute - degrees) * 60 - minutes) * 60);\r\n        \r\n        const direction = isLatitude \r\n            ? (decimal >= 0 ? 'N' : 'S')\r\n            : (decimal >= 0 ? 'E' : 'W');\r\n            \r\n        return `${degrees}¬∞${minutes}'${seconds}\"${direction}`;\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π\r\n    const addToHistory = async (action, details) => {\r\n        try {\r\n            const historyEntry = {\r\n                id: Date.now().toString(),\r\n                action: action,\r\n                details: details,\r\n                author: auth.currentUser?.uid || '',\r\n                authorName: users[auth.currentUser?.uid] || auth.currentUser?.email || 'Unknown',\r\n                timestamp: new Date().toISOString()\r\n            };\r\n\r\n            const projectRef = doc(db, `organizations/${orgId}/projects/${projectId}`);\r\n            await updateDoc(projectRef, {\r\n                history: arrayUnion(historyEntry)\r\n            });\r\n        } catch (error) {\r\n            console.error('Error adding to history:', error);\r\n        }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ Storage\r\n    const deleteAttachments = async (attachments) => {\r\n        if (!attachments || attachments.length === 0) return;\r\n        \r\n        try {\r\n            for (const file of attachments) {\r\n                if (file.path) {\r\n                    const fileRef = ref(storage, file.path);\r\n                    try {\r\n                        await deleteObject(fileRef);\r\n                    } catch (error) {\r\n                        console.warn(`Could not delete file ${file.name}:`, error);\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error deleting attachments:', error);\r\n        }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏\r\n    const handleDeleteNote = async () => {\r\n        if (!window.confirm(t('notes.confirmDelete'))) {\r\n            return;\r\n        }\r\n\r\n        setDeleting(true);\r\n        try {\r\n            // –£–¥–∞–ª—è–µ–º –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ Storage\r\n            if (note.attachments && note.attachments.length > 0) {\r\n                await deleteAttachments(note.attachments);\r\n            }\r\n\r\n            // –£–¥–∞–ª—è–µ–º –∑–∞–º–µ—Ç–∫—É –∏–∑ –º–∞—Å—Å–∏–≤–∞ notes –ø—Ä–æ–µ–∫—Ç–∞\r\n            const projectRef = doc(db, `organizations/${orgId}/projects/${projectId}`);\r\n            await updateDoc(projectRef, {\r\n                notes: arrayRemove(note)\r\n            });\r\n\r\n            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é\r\n            await addToHistory('note_deleted', {\r\n                noteTitle: note.title,\r\n                noteId: noteId,\r\n                deletedBy: auth.currentUser?.uid,\r\n                deletedByName: users[auth.currentUser?.uid] || auth.currentUser?.email,\r\n                hadAttachments: (note.attachments?.length || 0) > 0,\r\n                attachmentCount: note.attachments?.length || 0,\r\n                hadLocation: !!note.location,\r\n                hadGeologicalLog: !!note.geologicalLog\r\n            });\r\n\r\n            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–µ–∫—Ç–∞\r\n            router.push(`/pages/projects/${projectId}`);\r\n        } catch (error) {\r\n            console.error('Error deleting note:', error);\r\n            alert(t('notes.deleteError'));\r\n            setDeleting(false);\r\n        }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ —Ñ–∞–π–ª–∞\r\n    const getFileIcon = (file) => {\r\n        if (file.type?.startsWith('image/')) return 'üñºÔ∏è';\r\n        if (file.type?.includes('pdf')) return 'üìÑ';\r\n        if (file.name?.endsWith('.kml') || file.name?.endsWith('.gpx')) return 'üó∫Ô∏è';\r\n        return 'üìé';\r\n    };\r\n\r\n    if (loading || !note || !project) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen\">\r\n                <div className=\"text-xl\">{t('loading')}...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            <div className=\"max-w-5xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"mb-6\">\r\n                    <button\r\n                        onClick={() => router.push(`/pages/projects/${projectId}`)}\r\n                        className=\"text-blue-600 hover:text-blue-800 flex items-center gap-2 mb-3\"\r\n                    >\r\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 17l-5-5m0 0l5-5m-5 5h12\" />\r\n                        </svg>\r\n                        {t('notes.backToProject')}\r\n                    </button>\r\n                    <div className=\"flex items-start justify-between\">\r\n                        <div>\r\n                            <h1 className=\"text-3xl font-bold mb-2\">{note.title}</h1>\r\n                            <p className=\"text-gray-600\">{t('notes.project')}: {project.title}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        {/* –û–ø–∏—Å–∞–Ω–∏–µ */}\r\n                        <div className=\"bg-white rounded-lg shadow p-6\">\r\n                            <h2 className=\"text-xl font-semibold mb-4\">{t('notes.description')}</h2>\r\n                            <div className=\"prose max-w-none\">\r\n                                <p className=\"text-gray-700 whitespace-pre-wrap\">\r\n                                    {note.description || t('notes.noDescription')}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã */}\r\n                        {note.attachments && note.attachments.length > 0 && (\r\n                            <div className=\"bg-white rounded-lg shadow p-6\">\r\n                                <h2 className=\"text-xl font-semibold mb-4\">\r\n                                    üìé {t('notes.attachedFiles')} ({note.attachments.length})\r\n                                </h2>\r\n                                <div className=\"space-y-3\">\r\n                                    {note.attachments.map((file, index) => (\r\n                                        <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors\">\r\n                                            <div className=\"flex items-center space-x-3\">\r\n                                                <span className=\"text-3xl\">\r\n                                                    {getFileIcon(file)}\r\n                                                </span>\r\n                                                <div>\r\n                                                    <p className=\"font-medium text-gray-800\">\r\n                                                        {file.name}\r\n                                                    </p>\r\n                                                    <p className=\"text-sm text-gray-500\">\r\n                                                        {(file.size / 1024 / 1024).toFixed(2)} {t('notes.mb')}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <a\r\n                                                href={file.url}\r\n                                                target=\"_blank\"\r\n                                                rel=\"noopener noreferrer\"\r\n                                                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium\"\r\n                                            >\r\n                                                {t('notes.openFile')}\r\n                                            </a>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* –ö–∞—Ä—Ç–∞ —Å –ª–æ–∫–∞—Ü–∏–µ–π */}\r\n                        {note.location && (\r\n                            <div className=\"bg-white rounded-lg shadow p-6\">\r\n                                <h2 className=\"text-xl font-semibold mb-4\">üìç {t('notes.location')}</h2>\r\n                                <div className=\"mb-4\">\r\n                                    <h3 className=\"font-semibold text-lg text-gray-800\">{note.location.name}</h3>\r\n                                    {note.location.latitude && note.location.longitude && (\r\n                                        <div className=\"mt-2 text-sm text-gray-600 space-y-1\">\r\n                                            <p>\r\n                                                <span className=\"font-medium\">{t('notes.decimalCoordinates')}:</span>{' '}\r\n                                                {Number(note.location.latitude).toFixed(6)}, {Number(note.location.longitude).toFixed(6)}\r\n                                            </p>\r\n                                            <p>\r\n                                                <span className=\"font-medium\">{t('notes.dmsCoordinates')}:</span>{' '}\r\n                                                {decimalToDMS(Number(note.location.latitude), true)}, {decimalToDMS(Number(note.location.longitude), false)}\r\n                                            </p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"rounded-lg overflow-hidden border border-gray-200\">\r\n                                    <InteractiveMap\r\n                                        locations={[note.location]}\r\n                                        center={[Number(note.location.latitude), Number(note.location.longitude)]}\r\n                                        zoom={15}\r\n                                        height=\"400px\"\r\n                                        onMapClick={() => {}}\r\n                                        onLocationClick={() => {}}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* –ì–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ª–æ–≥ */}\r\n                        {note.geologicalLog && (\r\n                            <div className=\"bg-white rounded-lg shadow p-6\">\r\n                                <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\r\n                                    üó∫Ô∏è {t('notes.geologicalLog')}\r\n                                </h3>\r\n                                <div className=\"space-y-4\">\r\n                                    {/* –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}\r\n                                    <div className=\"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg\">\r\n                                        {note.geologicalLog.wellName && (\r\n                                            <div>\r\n                                                <p className=\"text-xs text-gray-500 mb-1\">{t('notes.well')}</p>\r\n                                                <p className=\"font-medium\">{note.geologicalLog.wellName}</p>\r\n                                            </div>\r\n                                        )}\r\n                                        {note.geologicalLog.location && (\r\n                                            <div>\r\n                                                <p className=\"text-xs text-gray-500 mb-1\">{t('notes.locationLabel')}</p>\r\n                                                <p className=\"font-medium\">{note.geologicalLog.location}</p>\r\n                                            </div>\r\n                                        )}\r\n                                        {note.geologicalLog.elevation && (\r\n                                            <div>\r\n                                                <p className=\"text-xs text-gray-500 mb-1\">{t('notes.elevation')}</p>\r\n                                                <p className=\"font-medium\">{note.geologicalLog.elevation} {t('notes.meters')}</p>\r\n                                            </div>\r\n                                        )}\r\n                                        {note.geologicalLog.totalDepth && (\r\n                                            <div>\r\n                                                <p className=\"text-xs text-gray-500 mb-1\">{t('notes.totalDepth')}</p>\r\n                                                <p className=\"font-medium\">{note.geologicalLog.totalDepth} {t('notes.meters')}</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Canvas –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */}\r\n                                    {note.geologicalLog.canvas && (\r\n                                        <div className=\"border rounded-lg overflow-hidden bg-gray-50\">\r\n                                            <img \r\n                                                src={note.geologicalLog.canvas} \r\n                                                alt={t('notes.geologicalLog')}\r\n                                                className=\"w-full h-auto\"\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* –°–ª–æ–∏ */}\r\n                                    {note.geologicalLog.layers && note.geologicalLog.layers.length > 0 && (\r\n                                        <div>\r\n                                            <h4 className=\"font-semibold mb-3\">{t('notes.layers')} ({note.geologicalLog.layers.length})</h4>\r\n                                            <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                                                {note.geologicalLog.layers.map((layer, index) => (\r\n                                                    <div key={index} className=\"p-3 bg-gray-50 rounded-lg border\">\r\n                                                        <div className=\"flex items-start gap-3\">\r\n                                                            <div\r\n                                                                className=\"w-6 h-6 rounded border border-gray-300 shrink-0\"\r\n                                                                style={{ backgroundColor: layer.color }}\r\n                                                            />\r\n                                                            <div className=\"flex-1\">\r\n                                                                <div className=\"flex items-center justify-between mb-1\">\r\n                                                                    <p className=\"font-medium text-sm\">{layer.lithology}</p>\r\n                                                                    <p className=\"text-xs text-gray-600\">\r\n                                                                        {layer.depthFrom}{t('notes.depthFrom')} {layer.depthTo}{t('notes.depthTo')}\r\n                                                                    </p>\r\n                                                                </div>\r\n                                                                {layer.description && (\r\n                                                                    <p className=\"text-xs text-gray-600 mt-1\">\r\n                                                                        {layer.description}\r\n                                                                    </p>\r\n                                                                )}\r\n                                                                {layer.grain_size && (\r\n                                                                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                                                                        {t('notes.grainSize')}: {layer.grain_size}\r\n                                                                    </p>\r\n                                                                )}\r\n                                                                {layer.fossils && (\r\n                                                                    <p className=\"text-xs text-gray-500 mt-1\">\r\n                                                                        {t('notes.fossils')}: {layer.fossils}\r\n                                                                    </p>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è */}\r\n                                    {note.geologicalLog.canvas && (\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                const link = document.createElement('a');\r\n                                                link.href = note.geologicalLog.canvas;\r\n                                                link.download = `geological_log_${note.geologicalLog.wellName || 'export'}.png`;\r\n                                                link.click();\r\n                                            }}\r\n                                            className=\"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium\"\r\n                                        >\r\n                                            üì• {t('notes.downloadLog')}\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */}\r\n                    <div className=\"space-y-6\">\r\n                        {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}\r\n                        <div className=\"bg-white rounded-lg shadow p-6\">\r\n                            <h3 className=\"text-lg font-semibold mb-4\">{t('notes.information')}</h3>\r\n                            <div className=\"space-y-3 text-sm\">\r\n                                <div>\r\n                                    <p className=\"text-gray-500 mb-1\">{t('notes.author')}</p>\r\n                                    <p className=\"font-medium text-gray-800\">{note.authorName}</p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-gray-500 mb-1\">{t('notes.createdAt')}</p>\r\n                                    <p className=\"font-medium text-gray-800\">{formatDate(note.createdAt)}</p>\r\n                                </div>\r\n                                {note.location && (\r\n                                    <div>\r\n                                        <p className=\"text-gray-500 mb-1\">{t('notes.locationInfo')}</p>\r\n                                        <p className=\"font-medium text-gray-800 flex items-center gap-1\">\r\n                                            <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                            </svg>\r\n                                            {note.location.name}\r\n                                        </p>\r\n                                    </div>\r\n                                )}\r\n                                {note.attachments && note.attachments.length > 0 && (\r\n                                    <div>\r\n                                        <p className=\"text-gray-500 mb-1\">{t('files.attachments')}</p>\r\n                                        <p className=\"font-medium text-gray-800 flex items-center gap-1\">\r\n                                            üìé {note.attachments.length} {t('notes.filesCount')}\r\n                                        </p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* –î–µ–π—Å—Ç–≤–∏—è */}\r\n                        <div className=\"bg-white rounded-lg shadow p-6\">\r\n                            <h3 className=\"text-lg font-semibold mb-4\">{t('notes.actions')}</h3>\r\n                            <div className=\"space-y-2\">\r\n                                <button\r\n                                    onClick={() => router.push(`/pages/projects/${projectId}/notes/${noteId}/edit`)}\r\n                                    className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n                                    </svg>\r\n                                    {t('notes.edit')}\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleDeleteNote}\r\n                                    disabled={deleting}\r\n                                    className=\"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n                                >\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                    </svg>\r\n                                    {deleting ? t('notes.deleting') : t('notes.delete')}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ViewNotePage;\r\n"],"names":[],"mappings":"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"}
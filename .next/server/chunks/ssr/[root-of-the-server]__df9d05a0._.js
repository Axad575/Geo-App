module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},32210,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(10682);a.s(["default",0,({onSave:a,initialData:e=null})=>{let{t:f}=(0,d.useStrings)(),g=(0,c.useRef)(null),[h,i]=(0,c.useState)({wellName:"",location:"",elevation:"",totalDepth:"",scale:100,layers:e?.layers||[]}),[j,k]=(0,c.useState)({depthFrom:"",depthTo:"",lithology:"sandstone",color:"#F4D03F",description:"",grain_size:"medium",fossils:"",remarks:""}),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),p={sandstone:{name:f("geologicalLog.sandstone"),color:"#F4D03F",pattern:"dots"},limestone:{name:f("geologicalLog.limestone"),color:"#85C1E2",pattern:"brick"},shale:{name:f("geologicalLog.shale"),color:"#95A5A6",pattern:"horizontal"},clay:{name:f("geologicalLog.clay"),color:"#D4AC6E",pattern:"solid"},coal:{name:f("geologicalLog.coal"),color:"#34495E",pattern:"solid"},granite:{name:f("geologicalLog.granite"),color:"#E8A798",pattern:"crosses"},conglomerate:{name:f("geologicalLog.conglomerate"),color:"#BDC3C7",pattern:"circles"},marl:{name:f("geologicalLog.marl"),color:"#AED6F1",pattern:"wavy"},dolomite:{name:f("geologicalLog.dolomite"),color:"#F8B88B",pattern:"brick"},gypsum:{name:f("geologicalLog.gypsum"),color:"#FAD7A0",pattern:"diagonal"}},q={very_fine:f("geologicalLog.veryFine"),fine:f("geologicalLog.fine"),medium:f("geologicalLog.medium"),coarse:f("geologicalLog.coarse"),very_coarse:f("geologicalLog.veryCoarse")};(0,c.useEffect)(()=>{let a=g.current;if(!a)return;let b=a.getContext("2d"),c=a.width,d=a.height;b.fillStyle="#ffffff",b.fillRect(0,0,c,d);let e=c-60-50,i=h.scale;b.fillStyle="#000",b.font="bold 16px Arial",b.textAlign="left",b.fillText(h.wellName||f("geologicalLog.title"),60,20),b.font="11px Arial";let j=35;if(h.location&&(b.fillText(`${f("geologicalLog.location")}: ${h.location}`,60,j),j+=14),h.elevation&&(b.fillText(`${f("geologicalLog.elevation")}: ${h.elevation} Ð¼`,60,j),j+=14),h.totalDepth&&b.fillText(`${f("geologicalLog.totalDepth")}: ${h.totalDepth} Ð¼`,60,j),l){b.strokeStyle="#ddd",b.lineWidth=1;let a=parseFloat(h.totalDepth)||Math.max(...h.layers.map(a=>a.depthTo),100);for(let d=0;d<=a;d+=10){let a=80+d*i/10;b.beginPath(),b.moveTo(60,a),b.lineTo(c-50,a),b.stroke(),b.fillStyle="#000",b.font="10px Arial",b.textAlign="right",b.fillText(`${d}m`,55,a+4)}}if(!l&&h.layers.length>0){b.fillStyle="#000",b.font="10px Arial",b.textAlign="right";let a=new Set;h.layers.forEach(b=>{a.add(b.depthFrom),a.add(b.depthTo)}),Array.from(a).sort((a,b)=>a-b).forEach(a=>{b.fillText(`${a}m`,55,80+a*i/10+4)})}h.layers.forEach(a=>{let d=80+a.depthFrom*i/10,f=80+a.depthTo*i/10-d;if(b.fillStyle=a.color,b.fillRect(60,d,e,f),r(b,60,d,e,f,p[a.lithology].pattern,a.color),b.strokeStyle="#000",b.lineWidth=2,b.strokeRect(60,d,e,f),n===a.id&&(b.strokeStyle="#e74c3c",b.lineWidth=3,b.strokeRect(60,d,e,f)),f>20){b.fillStyle="#000",b.font="bold 11px Arial",b.textAlign="center";let c=p[a.lithology].name;b.fillText(c,60+e/2,d+f/2-5),a.grain_size&&(b.font="9px Arial",b.fillText(`(${q[a.grain_size]})`,60+e/2,d+f/2+8))}if(a.description){b.fillStyle="#000",b.font="10px Arial",b.textAlign="left";let e=a.description.split(" "),f="",g=d+12;e.forEach(a=>{let d=f+a+" ";b.measureText(d).width>40&&""!==f?(b.fillText(f,c-50+5,g),f=a+" ",g+=12):f=d}),b.fillText(f,c-50+5,g)}}),t(b,c,d)},[h,l,n,f]);let r=(a,b,c,d,e,f,g)=>{switch(a.save(),a.strokeStyle=s(g,-40),a.lineWidth=1,f){case"dots":for(let f=0;f<d;f+=10)for(let d=0;d<e;d+=10)a.fillStyle=s(g,-40),a.beginPath(),a.arc(b+f+5,c+d+5,2,0,2*Math.PI),a.fill();break;case"horizontal":for(let f=0;f<e;f+=5)a.beginPath(),a.moveTo(b,c+f),a.lineTo(b+d,c+f),a.stroke();break;case"brick":for(let f=0;f<e;f+=10){let e=15*(f/10%2!=0);for(let g=e;g<d;g+=30)a.strokeRect(b+g,c+f,25,8)}break;case"crosses":for(let f=0;f<d;f+=15)for(let d=0;d<e;d+=15)a.beginPath(),a.moveTo(b+f,c+d-5),a.lineTo(b+f,c+d+5),a.moveTo(b+f-5,c+d),a.lineTo(b+f+5,c+d),a.stroke();break;case"circles":for(let f=0;f<d;f+=15)for(let d=0;d<e;d+=15)a.beginPath(),a.arc(b+f,c+d,4,0,2*Math.PI),a.stroke();break;case"diagonal":for(let f=-e;f<d;f+=10)a.beginPath(),a.moveTo(b+f,c+e),a.lineTo(b+f+e,c),a.stroke();break;case"wavy":for(let f=0;f<e;f+=8){a.beginPath(),a.moveTo(b,c+f);for(let e=0;e<d;e+=5)a.lineTo(b+e,c+f+2*Math.sin(e/5));a.stroke()}}a.restore()},s=(a,b)=>{let c=parseInt(a.replace("#",""),16),d=Math.max(0,Math.min(255,(c>>16)+b)),e=Math.max(0,Math.min(255,(c>>8&255)+b)),f=Math.max(0,Math.min(255,(255&c)+b));return`#${(d<<16|e<<8|f).toString(16).padStart(6,"0")}`},t=(a,b,c)=>{let d=[...new Set(h.layers.map(a=>a.lithology))];if(0===d.length)return;let e=30+20*d.length+10,g=c-e-10;a.fillStyle="rgba(255, 255, 255, 0.95)",a.fillRect(10,g,200,e),a.strokeStyle="#000",a.lineWidth=1,a.strokeRect(10,g,200,e),a.fillStyle="#000",a.font="bold 12px Arial",a.textAlign="left",a.fillText(f("geologicalLog.legend")+":",20,g+20),a.font="10px Arial";let i=35;d.forEach(b=>{let c=p[b];a.fillStyle=c.color,a.fillRect(20,g+i,20,15),a.strokeStyle="#000",a.lineWidth=1,a.strokeRect(20,g+i,20,15),a.fillStyle="#000",a.fillText(c.name,45,g+i+11),i+=20})};return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:f("geologicalLog.title")}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{let a=g.current,b=document.createElement("a");b.download=`geological_log_${Date.now()}.png`,b.href=a.toDataURL(),b.click()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:["ðŸ“¥ ",f("geologicalLog.exportPNG")]}),(0,b.jsxs)("button",{onClick:()=>{a&&a({...h,canvas:g.current.toDataURL()})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:["ðŸ’¾ ",f("geologicalLog.save")]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:f("geologicalLog.generalData")}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:f("geologicalLog.wellName")}),(0,b.jsx)("input",{type:"text",value:h.wellName,onChange:a=>i(b=>({...b,wellName:a.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm",placeholder:f("geologicalLog.wellNamePlaceholder")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:f("geologicalLog.location")}),(0,b.jsx)("input",{type:"text",value:h.location,onChange:a=>i(b=>({...b,location:a.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm",placeholder:f("geologicalLog.locationPlaceholder")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:f("geologicalLog.elevation")}),(0,b.jsx)("input",{type:"number",value:h.elevation,onChange:a=>i(b=>({...b,elevation:a.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-1",children:f("geologicalLog.totalDepth")}),(0,b.jsx)("input",{type:"number",value:h.totalDepth,onChange:a=>i(b=>({...b,totalDepth:a.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",checked:l,onChange:a=>m(a.target.checked),className:"mr-2"}),(0,b.jsx)("label",{className:"text-sm",children:f("geologicalLog.showGrid")})]})]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:f("geologicalLog.addLayer")}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1",children:f("geologicalLog.depthFrom")}),(0,b.jsx)("input",{type:"number",step:"0.1",value:j.depthFrom,onChange:a=>k(b=>({...b,depthFrom:a.target.value})),className:"w-full px-2 py-1 border rounded text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1",children:f("geologicalLog.depthTo")}),(0,b.jsx)("input",{type:"number",step:"0.1",value:j.depthTo,onChange:a=>k(b=>({...b,depthTo:a.target.value})),className:"w-full px-2 py-1 border rounded text-sm"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1",children:f("geologicalLog.lithology")}),(0,b.jsx)("select",{value:j.lithology,onChange:a=>k(b=>({...b,lithology:a.target.value,color:p[a.target.value].color})),className:"w-full px-2 py-1 border rounded text-sm",children:Object.entries(p).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c.name},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1",children:f("geologicalLog.grainSize")}),(0,b.jsx)("select",{value:j.grain_size,onChange:a=>k(b=>({...b,grain_size:a.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:Object.entries(q).map(([a,c])=>(0,b.jsx)("option",{value:a,children:c},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1",children:f("geologicalLog.description")}),(0,b.jsx)("textarea",{value:j.description,onChange:a=>k(b=>({...b,description:a.target.value})),className:"w-full px-2 py-1 border rounded text-sm",rows:"2",placeholder:f("geologicalLog.descriptionPlaceholder")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium mb-1",children:f("geologicalLog.fossils")}),(0,b.jsx)("input",{type:"text",value:j.fossils,onChange:a=>k(b=>({...b,fossils:a.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:f("geologicalLog.fossilsPlaceholder")})]}),(0,b.jsxs)("button",{onClick:()=>{if(!j.depthFrom||!j.depthTo)return void alert(f("geologicalLog.enterDepth"));let a=parseFloat(j.depthFrom),b=parseFloat(j.depthTo);if(a>=b)return void alert(f("geologicalLog.depthError"));let c={id:Date.now().toString(),...j,depthFrom:a,depthTo:b,color:p[j.lithology].color};i(a=>({...a,layers:[...a.layers,c].sort((a,b)=>a.depthFrom-b.depthFrom)})),k({depthFrom:b.toString(),depthTo:"",lithology:"sandstone",color:"#F4D03F",description:"",grain_size:"medium",fossils:"",remarks:""})},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:["+ ",f("geologicalLog.addLayerButton")]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg max-h-96 overflow-y-auto",children:[(0,b.jsxs)("h3",{className:"font-semibold mb-3",children:[f("geologicalLog.layers")," (",h.layers.length,")"]}),0===h.layers.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:f("geologicalLog.noLayers")}):(0,b.jsx)("div",{className:"space-y-2",children:h.layers.map(a=>(0,b.jsx)("div",{onClick:()=>o(a.id),className:`p-2 rounded cursor-pointer ${n===a.id?"bg-blue-100 border-2 border-blue-500":"bg-white"}`,children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:a.color}}),(0,b.jsx)("span",{className:"text-xs font-medium",children:p[a.lithology].name})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-600",children:[a.depthFrom,"m - ",a.depthTo,"m"]}),a.description&&(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1 truncate",children:a.description})]}),(0,b.jsx)("button",{onClick:b=>{var c;b.stopPropagation(),c=a.id,window.confirm(f("geologicalLog.deleteLayer"))&&(i(a=>({...a,layers:a.layers.filter(a=>a.id!==c)})),n===c&&o(null))},className:"text-red-500 hover:text-red-700 p-1",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},a.id))})]})]}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 overflow-auto",children:(0,b.jsx)("canvas",{ref:g,width:600,height:800,className:"border border-gray-300 bg-white mx-auto"})})})]}),(0,b.jsx)("div",{className:"mt-6 p-4 bg-yellow-50 border-2 border-yellow-400 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-yellow-600 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-semibold text-yellow-900 mb-1",children:["âš ï¸ ",f("geologicalLog.warningTitle")]}),(0,b.jsxs)("p",{className:"text-sm text-yellow-800",children:[f("geologicalLog.warningText")," ",(0,b.jsxs)("strong",{children:['"ðŸ’¾ ',f("geologicalLog.warningButton"),'"']}),"."," ",f("geologicalLog.warningFooter")]})]})]})})]})}])},77001,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(30485);var e=a.i(31052),f=a.i(76650);a.i(69387);var g=a.i(60574);a.i(60121);var h=a.i(5420),i=a.i(10682),j=a.i(32210);a.s(["default",0,()=>{let{t:a}=(0,i.useStrings)(),k=(0,d.useRouter)(),l=(0,d.useParams)(),m=(0,e.getAuth)(f.app),n=l.id,o=l.noteId,[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)({}),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)({title:"",description:"",locationId:""}),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),L=async a=>{try{for(let b of(await (0,g.getDocs)((0,g.collection)(f.db,"organizations"))).docs)if((await (0,g.getDoc)((0,g.doc)(f.db,`organizations/${b.id}/users/${a}`))).exists())return b.id;return null}catch(a){return console.error("Error fetching user organization:",a),null}},M=async a=>{try{let b=await (0,g.getDoc)((0,g.doc)(f.db,`organizations/${a}/projects/${n}`));if(b.exists()){let a={id:b.id,...b.data()};s(a);let c=a.notes?.find(a=>a.id===o);c?(u(c),C({title:c.title||"",description:c.description||"",locationId:c.location?.id||""}),E(c.attachments||[]),I(c.geologicalLog||null)):(console.error("Note not found"),k.push(`/pages/projects/${n}`))}else console.error("Project not found"),k.push("/pages/projects")}catch(a){console.error("Error fetching project:",a)}},N=async a=>{try{let b=await (0,g.getDocs)((0,g.collection)(f.db,`organizations/${a}/users`)),c={};b.docs.forEach(a=>{c[a.id]=a.data().name||a.data().email}),w(c)}catch(a){console.error("Error fetching users:",a)}};(0,c.useEffect)(()=>{(async()=>{let a=m.currentUser;if(!a)return k.push("/auth/login");let b=await L(a.uid);b&&(q(b),await M(b),await N(b)),y(!1)})()},[n,o]);let O=async(a,b,c)=>{try{let d=Date.now(),e=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),g=`projects/${b}/notes/${c}/files/${d}_${e}`,i=(0,h.ref)(f.storage,g),j=await (0,h.uploadBytes)(i,a);return{url:await (0,h.getDownloadURL)(j.ref),path:g,name:a.name,size:a.size,type:a.type,uploadedAt:new Date().toISOString(),uploadedBy:m.currentUser?.uid||""}}catch(a){throw console.error("Error uploading file:",a),a}},P=async b=>{if(!b||0===b.length)return;G(!0);let c=[];try{for(let d of Array.from(b)){if(d.size>0xa00000){alert(a("notes.fileTooLarge").replace("{fileName}",d.name));continue}let b=await O(d,n,o);c.push(b)}E(a=>[...a,...c])}catch(b){console.error("File upload error:",b),alert(a("notes.fileUploadError"))}finally{G(!1)}},Q=async(a,b)=>{try{let c={id:Date.now().toString(),action:a,details:b,author:m.currentUser?.uid||"",authorName:v[m.currentUser?.uid]||m.currentUser?.email||"Unknown",timestamp:new Date().toISOString()},d=(0,g.doc)(f.db,`organizations/${p}/projects/${n}`);await (0,g.updateDoc)(d,{history:(0,g.arrayUnion)(c)})}catch(a){console.error("Error adding to history:",a)}},R=async()=>{if(!B.title.trim())return void alert(a("notes.pleaseEnterTitle"));A(!0);try{let a=B.locationId?r.locations?.find(a=>a.id===B.locationId):null,b={...t,title:B.title,description:B.description||"",location:a?{id:a.id,name:a.name,latitude:a.latitude||0,longitude:a.longitude||0}:null,attachments:D||[],geologicalLog:H||null,updatedAt:new Date().toISOString(),updatedBy:m.currentUser?.uid||""},c=(0,g.doc)(f.db,`organizations/${p}/projects/${n}`);await (0,g.updateDoc)(c,{notes:(0,g.arrayRemove)(t)}),await (0,g.updateDoc)(c,{notes:(0,g.arrayUnion)(b)}),await Q("note_updated",{noteTitle:B.title,noteId:o}),k.push(`/pages/projects/${n}/notes/${o}`)}catch(b){console.error("Error updating note:",b),alert(a("notes.errorUpdatingNote"))}finally{A(!1)}};return!x&&t&&r?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>k.push(`/pages/projects/${n}/notes/${o}`),className:"text-blue-600 hover:text-blue-800 flex items-center gap-2 mb-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 17l-5-5m0 0l5-5m-5 5h12"})}),a("cancel")]}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:a("notes.editNote")}),(0,b.jsxs)("p",{className:"text-gray-600 mt-1",children:[a("notes.project"),": ",r.title]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a("notes.noteTitle")," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:B.title,onChange:a=>C(b=>({...b,title:a.target.value})),placeholder:a("notes.enterTitle"),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("projects.description")}),(0,b.jsx)("textarea",{value:B.description,onChange:a=>C(b=>({...b,description:a.target.value})),placeholder:a("notes.enterDescription"),className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"6"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("notes.linkToLocation")}),(0,b.jsxs)("select",{value:B.locationId,onChange:a=>C(b=>({...b,locationId:a.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:a("notes.noLocation")}),r.locations&&r.locations.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name,a.latitude&&a.longitude&&` (${a.latitude}, ${a.longitude})`]},a.id))]}),(!r.locations||0===r.locations.length)&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a("notes.addLocationFirst")})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["ðŸ—ºï¸ ",a("notes.geologicalLog")]}),(0,b.jsx)("button",{type:"button",onClick:()=>K(!J),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:J?`âž– ${a("notes.hideEditor")}`:`âž• ${a("notes.openEditor")}`})]}),J&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(j.default,{onSave:b=>{I(b),alert(a("notes.logSaved"))},initialData:H})}),H&&!J&&(0,b.jsx)("div",{className:"mt-2 p-4 bg-purple-50 border-2 border-purple-200 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-purple-900",children:["âœ… ",a("notes.logCreated")]}),(0,b.jsxs)("p",{className:"text-xs text-purple-700 mt-1",children:[a("notes.wellName"),": ",H.wellName||a("notes.notSpecifiedWell")," |"," ",a("notes.layersCount"),": ",H.layers?.length||0]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>K(!0),className:"text-purple-600 hover:text-purple-800 text-sm font-medium",children:a("notes.editLog")})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["ðŸ“Ž ",a("notes.attachFiles")]}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[(0,b.jsx)("input",{type:"file",multiple:!0,id:"file-upload",className:"hidden",onChange:a=>P(a.target.files),accept:"image/*,application/pdf,.doc,.docx,.txt,.csv,.kml,.gpx"}),(0,b.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-base text-gray-600 font-medium",children:F?a("notes.uploadingFiles"):a("notes.fileDropZone")}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:a("notes.fileDropHint")})]})]})})]}),D.length>0&&(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[a("notes.attachedFiles")," (",D.length,"):"]}),D.map((c,d)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:c.type?.startsWith("image/")?"ðŸ–¼ï¸":c.type?.includes("pdf")?"ðŸ“„":c.name?.endsWith(".kml")||c.name?.endsWith(".gpx")?"ðŸ—ºï¸":"ðŸ“Ž"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-800",children:c.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[(c.size/1024/1024).toFixed(2)," ",a("notes.mb")]})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{E(a=>a.filter((a,b)=>b!==d))},className:"text-red-500 hover:text-red-700 p-2",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},d))]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 mt-8 pt-6 border-t",children:[(0,b.jsx)("button",{onClick:R,disabled:!B.title.trim()||z,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors",children:z?a("notes.saving"):a("save")}),(0,b.jsx)("button",{onClick:()=>k.push(`/pages/projects/${n}/notes/${o}`),disabled:z,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 font-medium transition-colors",children:a("cancel")})]})]})]})}):(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsxs)("div",{className:"text-xl",children:[a("loading"),"..."]})})}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__df9d05a0._.js.map
{"version":3,"sources":["../../../../app/pages/meetings/page.js","../../../../app/components/CreateMeetingModal.js","../../../../app/utils/calendarUtils.js","../../../../app/components/CalendarDropdown.js","../../../../app/components/MeetingListItem.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport { app, db } from \"@/app/api/firebase\";\r\nimport { collection, getDocs, query, orderBy, doc, getDoc, updateDoc, addDoc } from \"firebase/firestore\";\r\nimport Sidebar from \"@/app/components/sidebar\";\r\nimport Navbar from \"@/app/components/navbar\";\r\nimport CreateMeetingModal from \"@/app/components/CreateMeetingModal\";\r\nimport MeetingListItem from \"@/app/components/MeetingListItem\";\r\nimport ParticipantSelector from \"@/app/components/participantSelector\";\r\nimport { useStrings } from \"@/app/hooks/useStrings\";\r\nimport CalendarDropdown from \"@/app/components/CalendarDropdown\";\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é\r\nconst generateConferenceUrl = (meetingTitle, orgId, meetingId) => {\r\n    const roomName = `${orgId}_${meetingTitle.replace(/[^a-zA-Z0-9]/g, '_')}_${meetingId}`;\r\n    return `https://meet.jit.si/${roomName}`;\r\n};\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º\r\nconst sendMeetingNotifications = async (meeting, orgId, db) => {\r\n    try {\r\n        for (const participantId of meeting.participants || []) {\r\n            await addDoc(collection(db, `organizations/${orgId}/users/${participantId}/notifications`), {\r\n                type: 'meeting_started',\r\n                meetingId: meeting.id,\r\n                meetingTitle: meeting.title,\r\n                conferenceUrl: meeting.conferenceUrl,\r\n                createdAt: new Date().toISOString(),\r\n                read: false,\r\n                message: `–ù–∞—á–∞–ª–∞—Å—å –≤—Å—Ç—Ä–µ—á–∞: ${meeting.title}`\r\n            });\r\n        }\r\n    } catch (error) {\r\n        console.error('Error sending notifications:', error);\r\n    }\r\n};\r\n\r\n// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∏\r\nconst QuickMeetingModal = ({ isOpen, onClose, onSubmit, orgId }) => {\r\n    const { t } = useStrings();\r\n    \r\n    const [meetingData, setMeetingData] = useState({\r\n        title: '',\r\n        description: '',\r\n        participants: []\r\n    });\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && orgId) {\r\n            fetchUsers();\r\n            const auth = getAuth();\r\n            setCurrentUser(auth.currentUser);\r\n        }\r\n    }, [isOpen, orgId]);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const usersSnapshot = await getDocs(collection(db, `organizations/${orgId}/users`));\r\n            const usersList = usersSnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setUsers(usersList);\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!meetingData.title.trim()) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            await onSubmit(meetingData);\r\n            setMeetingData({\r\n                title: '',\r\n                description: '',\r\n                participants: []\r\n            });\r\n        } catch (error) {\r\n            console.error('Error creating quick meeting:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleParticipantsChange = (participants) => {\r\n        setMeetingData(prev => ({\r\n            ...prev,\r\n            participants\r\n        }));\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h3 className=\"text-lg font-semibold\">{t('meetings.instantMeeting')}</h3>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"text-gray-400 hover:text-gray-600\"\r\n                    >\r\n                        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('meetings.meetingTopic')} *\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            required\r\n                            value={meetingData.title}\r\n                            onChange={(e) => setMeetingData(prev => ({ ...prev, title: e.target.value }))}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                            placeholder={t('meetings.enterMeetingTopic')}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('meetings.description')}\r\n                        </label>\r\n                        <textarea\r\n                            value={meetingData.description}\r\n                            onChange={(e) => setMeetingData(prev => ({ ...prev, description: e.target.value }))}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                            rows=\"3\"\r\n                            placeholder={t('meetings.briefDescription')}\r\n                        />\r\n                    </div>\r\n\r\n                    <ParticipantSelector\r\n                        users={users}\r\n                        selectedParticipants={meetingData.participants}\r\n                        onParticipantsChange={handleParticipantsChange}\r\n                        excludeUserIds={currentUser ? [currentUser.uid] : []}\r\n                        label={t('meetings.participantsLabel')}\r\n                        placeholder={t('meetings.searchParticipants')}\r\n                        maxHeight=\"250px\"\r\n                        showSelectedCount={true}\r\n                    />\r\n\r\n                    <div className=\"flex gap-3 pt-4\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={!meetingData.title.trim() || loading}\r\n                            className=\"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2\"\r\n                        >\r\n                            {loading ? t('meetings.starting') : (\r\n                                <>\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                                    </svg>\r\n                                    {t('meetings.startConference')}\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            disabled={loading}\r\n                            className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 disabled:opacity-50 transition-colors\"\r\n                        >\r\n                            {t('cancel')}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—Å—Ç—Ä–µ—á–∏\r\nconst EnhancedMeetingListItem = ({ meeting, users, onMeetingUpdate }) => {\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n    const { t } = useStrings();\r\n    \r\n    const formatDate = (timestamp) => {\r\n        if (!timestamp) return '';\r\n        \r\n        try {\r\n            let date;\r\n            if (timestamp.seconds) {\r\n                date = new Date(timestamp.seconds * 1000);\r\n            } else if (typeof timestamp === 'string' || timestamp instanceof String) {\r\n                date = new Date(timestamp);\r\n            } else {\r\n                date = timestamp;\r\n            }\r\n            \r\n            if (isNaN(date.getTime())) return '';\r\n            \r\n            const day = String(date.getDate()).padStart(2, '0');\r\n            const month = String(date.getMonth() + 1).padStart(2, '0');\r\n            const year = date.getFullYear();\r\n            \r\n            return `${day}/${month}/${year}`;\r\n        } catch (error) {\r\n            console.error('Error formatting date:', error);\r\n            return '';\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status) => {\r\n        switch (status?.toLowerCase()) {\r\n            case 'completed':\r\n                return 'bg-green-100 text-green-800';\r\n            case 'in_progress':\r\n                return 'bg-blue-100 text-blue-800';\r\n            case 'scheduled':\r\n            case 'upcoming':\r\n            case null:\r\n            case undefined:\r\n                return 'bg-yellow-100 text-yellow-800';\r\n            case 'cancelled':\r\n                return 'bg-red-100 text-red-800';\r\n            default:\r\n                return 'bg-gray-100 text-gray-800';\r\n        }\r\n    };\r\n\r\n    const getStatusText = (status) => {\r\n        switch (status?.toLowerCase()) {\r\n            case 'completed': return t('meetings.completed');\r\n            case 'in_progress': return t('meetings.inProgress');\r\n            case 'scheduled':\r\n            case 'upcoming':\r\n            case null:\r\n            case undefined:\r\n                return t('meetings.scheduled');\r\n            case 'cancelled': return t('meetings.cancelled');\r\n            default: return t('meetings.scheduled');\r\n        }\r\n    };\r\n\r\n    const handleJoinConference = () => {\r\n        if (meeting.conferenceUrl) {\r\n            window.open(meeting.conferenceUrl, '_blank');\r\n        } else {\r\n            alert(t('meetings.conferenceUrlUnavailable'));\r\n        }\r\n    };\r\n\r\n    const handleMarkCompleted = async () => {\r\n        setIsUpdating(true);\r\n        try {\r\n            await onMeetingUpdate(meeting.id, {\r\n                status: 'completed',\r\n                completedAt: new Date().toISOString()\r\n            });\r\n        } catch (error) {\r\n            console.error('Error marking meeting as completed:', error);\r\n            alert(t('meetings.errorUpdating'));\r\n        } finally {\r\n            setIsUpdating(false);\r\n        }\r\n    };\r\n\r\n    const handleStartMeeting = async () => {\r\n        setIsUpdating(true);\r\n        try {\r\n            if (meeting.type === 'instant' && meeting.conferenceUrl) {\r\n                await onMeetingUpdate(meeting.id, {\r\n                    status: 'in_progress',\r\n                    startedAt: new Date().toISOString()\r\n                });\r\n                window.open(meeting.conferenceUrl, '_blank');\r\n            } else {\r\n                const conferenceUrl = generateConferenceUrl(meeting.title, meeting.orgId, meeting.id);\r\n                await onMeetingUpdate(meeting.id, {\r\n                    status: 'in_progress',\r\n                    startedAt: new Date().toISOString(),\r\n                    conferenceUrl: conferenceUrl\r\n                });\r\n                window.open(conferenceUrl, '_blank');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error starting meeting:', error);\r\n            alert(t('meetings.errorStarting'));\r\n        } finally {\r\n            setIsUpdating(false);\r\n        }\r\n    };\r\n\r\n    const handleCancelMeeting = async () => {\r\n        if (window.confirm(t('meetings.cancelMeetingConfirm'))) {\r\n            setIsUpdating(true);\r\n            try {\r\n                await onMeetingUpdate(meeting.id, {\r\n                    status: 'cancelled',\r\n                    cancelledAt: new Date().toISOString()\r\n                });\r\n            } catch (error) {\r\n                console.error('Error cancelling meeting:', error);\r\n                alert(t('meetings.errorCancelling'));\r\n            } finally {\r\n                setIsUpdating(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const normalizedStatus = meeting.status?.toLowerCase() || 'scheduled';\r\n    \r\n    const isCompleted = normalizedStatus === 'completed';\r\n    const isInProgress = normalizedStatus === 'in_progress';\r\n    const isScheduled = normalizedStatus === 'scheduled' || \r\n                      normalizedStatus === 'upcoming' || \r\n                      !meeting.status || \r\n                      normalizedStatus === null;\r\n    const isCancelled = normalizedStatus === 'cancelled';\r\n\r\n    return (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg p-6 mb-4 hover:shadow-md transition-shadow\">\r\n            {/* Header with title, status and calendar button */}\r\n            <div className=\"flex justify-between items-start mb-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <h3 className=\"text-xl font-semibold text-gray-900\">{meeting.title}</h3>\r\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(meeting.status)}`}>\r\n                        {getStatusText(meeting.status)}\r\n                    </span>\r\n                    {meeting.conferenceUrl && (\r\n                        <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800\">\r\n                            {t('meetings.videoConference')}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                \r\n                {/* Calendar button - top right */}\r\n                {(isScheduled || isInProgress) && (\r\n                    <CalendarDropdown meeting={{\r\n                        ...meeting,\r\n                        date: meeting.datetime || new Date().toISOString()\r\n                    }} />\r\n                )}\r\n            </div>\r\n\r\n            {/* Meeting info */}\r\n            <div className=\"mb-4\">\r\n                <div className=\"grid grid-cols-2 gap-4 text-sm mb-3\">\r\n                    <div className=\"text-gray-600\">\r\n                        <span className=\"font-medium\">{t('meetings.meetingDate')}:</span>{' '}\r\n                        {formatDate(meeting.datetime) || t('meetings.noDate')}\r\n                        {meeting.time && ` ${meeting.time}`}\r\n                    </div>\r\n                    {meeting.location && (\r\n                        <div className=\"text-gray-600\">\r\n                            <span className=\"font-medium\">{t('meetings.location')}:</span> {meeting.location}\r\n                        </div>\r\n                    )}\r\n                    {meeting.completedAt && (\r\n                        <div className=\"text-gray-600\">\r\n                            <span className=\"font-medium\">{t('meetings.finishedAt')}:</span> {formatDate(meeting.completedAt)}\r\n                        </div>\r\n                    )}\r\n                    {meeting.startedAt && (\r\n                        <div className=\"text-gray-600\">\r\n                            <span className=\"font-medium\">{t('meetings.startedAt')}:</span> {formatDate(meeting.startedAt)}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Participants */}\r\n                {meeting.participants && meeting.participants.length > 0 && (\r\n                    <div className=\"mt-3\">\r\n                        <span className=\"text-sm font-medium text-gray-700\">{t('meetings.participants')}: </span>\r\n                        <div className=\"flex flex-wrap gap-2 mt-1\">\r\n                            {meeting.participants.map((participantId) => (\r\n                                <span \r\n                                    key={participantId}\r\n                                    className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs\"\r\n                                >\r\n                                    {users[participantId] || participantId}\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Action buttons - horizontal at bottom */}\r\n            {isCompleted ? (\r\n                <div className=\"flex items-center text-green-600 text-sm font-medium\">\r\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                    {t('meetings.completed')}\r\n                </div>\r\n            ) : isCancelled ? (\r\n                <div className=\"flex items-center text-red-600 text-sm font-medium\">\r\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                    {t('meetings.cancelled')}\r\n                </div>\r\n            ) : (\r\n                <div className=\"flex gap-3\">\r\n                    {/* Start/Join Button */}\r\n                    {isScheduled && (\r\n                        <button\r\n                            onClick={handleStartMeeting}\r\n                            disabled={isUpdating}\r\n                            className=\"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center gap-1\"\r\n                        >\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                            </svg>\r\n                            {isUpdating ? '...' : t('meetings.start')}\r\n                        </button>\r\n                    )}\r\n\r\n                    {isInProgress && meeting.conferenceUrl && (\r\n                        <button\r\n                            onClick={handleJoinConference}\r\n                            className=\"px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-1\"\r\n                        >\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                            </svg>\r\n                            {t('meetings.join')}\r\n                        </button>\r\n                    )}\r\n\r\n                    {/* Conducted Button */}\r\n                    <button\r\n                        onClick={handleMarkCompleted}\r\n                        disabled={isUpdating}\r\n                        className=\"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center gap-1\"\r\n                    >\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\r\n                        </svg>\r\n                        {isUpdating ? '...' : t('meetings.conducted')}\r\n                    </button>\r\n\r\n                    {/* Cancel Button */}\r\n                    <button\r\n                        onClick={handleCancelMeeting}\r\n                        disabled={isUpdating}\r\n                        className=\"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors\"\r\n                    >\r\n                        {isUpdating ? '...' : t('meetings.cancel')}\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function Meetings() {\r\n    const auth = getAuth(app);\r\n    const router = useRouter();\r\n    const { t } = useStrings();\r\n    const [meetings, setMeetings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isQuickMeetingModalOpen, setIsQuickMeetingModalOpen] = useState(false);\r\n    const [users, setUsers] = useState({});\r\n    const [orgId, setOrgId] = useState(null);\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [filter, setFilter] = useState('all');\r\n\r\n    const getCurrentUserOrg = async (userId) => {\r\n        try {\r\n            const organizationsSnapshot = await getDocs(collection(db, 'organizations'));\r\n            \r\n            for (const orgDoc of organizationsSnapshot.docs) {\r\n                const userInOrgDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/users/${userId}`));\r\n                if (userInOrgDoc.exists()) {\r\n                    console.log('User found in organization:', orgDoc.id);\r\n                    return orgDoc.id;\r\n                }\r\n            }\r\n\r\n            console.log('User not found in any organization');\r\n            return null;\r\n        } catch (error) {\r\n            console.error('Error fetching user organization:', error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const fetchUsers = async (organizationId) => {\r\n        try {\r\n            const usersSnapshot = await getDocs(collection(db, `organizations/${organizationId}/users`));\r\n            const usersMap = {};\r\n            usersSnapshot.docs.forEach(doc => {\r\n                usersMap[doc.id] = doc.data().name || doc.data().email;\r\n            });\r\n            setUsers(usersMap);\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n   const fetchMeetings = async (organizationId, userId) => {\r\n    try {\r\n        const meetingsRef = collection(db, `organizations/${organizationId}/meetings`);\r\n        const querySnapshot = await getDocs(meetingsRef);\r\n        \r\n        console.log(`Found ${querySnapshot.docs.length} total meetings in organization`);\r\n        \r\n        const meetingsList = querySnapshot.docs\r\n            .map(doc => {\r\n                const data = doc.data();\r\n                console.log('Meeting data:', doc.id, data);\r\n                return {\r\n                    id: doc.id,\r\n                    orgId: organizationId,\r\n                    ...data\r\n                };\r\n            })\r\n            .filter(meeting => {\r\n                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å—Ç—Ä–µ—á–∏ –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:\r\n                // 1. –Ø–≤–ª—è–µ—Ç—Å—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–º (owner/createdBy)\r\n                const isOwner = meeting.owner === userId || meeting.createdBy === userId;\r\n                \r\n                // 2. –ï—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (participants)\r\n                const isParticipant = meeting.participants?.includes(userId);\r\n                \r\n                console.log(`Meeting \"${meeting.title}\": isOwner=${isOwner}, isParticipant=${isParticipant}`);\r\n                \r\n                return isOwner || isParticipant;\r\n            })\r\n            .sort((a, b) => {\r\n                const dateA = new Date(a.date?.seconds ? a.date.seconds * 1000 : a.date || 0);\r\n                const dateB = new Date(b.date?.seconds ? b.date.seconds * 1000 : b.date || 0);\r\n                return dateB - dateA;\r\n            });\r\n        \r\n        console.log(`Filtered ${meetingsList.length} meetings for user ${userId}`);\r\n        setMeetings(meetingsList);\r\n    } catch (error) {\r\n        console.error('Error fetching meetings:', error);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n};\r\n\r\n    const handleMeetingUpdate = async (meetingId, updateData) => {\r\n        try {\r\n            const meetingRef = doc(db, `organizations/${orgId}/meetings/${meetingId}`);\r\n            await updateDoc(meetingRef, {\r\n                ...updateData,\r\n                updatedAt: new Date().toISOString()\r\n            });\r\n            \r\n            await fetchMeetings(orgId, currentUser.uid);\r\n        } catch (error) {\r\n            console.error('Error updating meeting:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const handleQuickMeeting = async (meetingData) => {\r\n        try {\r\n            const tempId = Date.now().toString();\r\n            const conferenceUrl = generateConferenceUrl(meetingData.title, orgId, tempId);\r\n            \r\n            const newMeeting = {\r\n                ...meetingData,\r\n                date: new Date().toISOString(),\r\n                status: 'in_progress',\r\n                type: 'instant',\r\n                conferenceUrl: conferenceUrl,\r\n                createdAt: new Date().toISOString(),\r\n                createdBy: currentUser.uid,\r\n                startedAt: new Date().toISOString()\r\n            };\r\n\r\n            const docRef = await addDoc(collection(db, `organizations/${orgId}/meetings`), newMeeting);\r\n            \r\n            const finalConferenceUrl = generateConferenceUrl(meetingData.title, orgId, docRef.id);\r\n            await updateDoc(docRef, { conferenceUrl: finalConferenceUrl });\r\n            \r\n            window.open(finalConferenceUrl, '_blank');\r\n            \r\n            await sendMeetingNotifications({\r\n                ...newMeeting,\r\n                id: docRef.id,\r\n                conferenceUrl: finalConferenceUrl\r\n            }, orgId, db);\r\n            \r\n            await fetchMeetings(orgId, currentUser.uid);\r\n            setIsQuickMeetingModalOpen(false);\r\n        } catch (error) {\r\n            console.error('Error creating quick meeting:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n            if (user) {\r\n                setCurrentUser(user);\r\n                const userOrgId = await getCurrentUserOrg(user.uid);\r\n                \r\n                if (userOrgId) {\r\n                    setOrgId(userOrgId);\r\n                    await fetchUsers(userOrgId);\r\n                    await fetchMeetings(userOrgId, user.uid);\r\n                } else {\r\n                    console.error('User is not assigned to any organization');\r\n                    setLoading(false);\r\n                }\r\n            } else {\r\n                router.push('/auth/login');\r\n            }\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const handleSuccess = () => {\r\n        if (orgId && currentUser) {\r\n            fetchMeetings(orgId, currentUser.uid);\r\n        }\r\n    };\r\n\r\n    const filteredMeetings = meetings.filter(meeting => {\r\n        if (filter === 'all') return true;\r\n        \r\n        const normalizedStatus = meeting.status?.toLowerCase() || 'scheduled';\r\n        \r\n        if (filter === 'scheduled') {\r\n            return normalizedStatus === 'scheduled' || \r\n                   normalizedStatus === 'upcoming' || \r\n                   !meeting.status || \r\n                   normalizedStatus === null;\r\n        }\r\n        \r\n        return normalizedStatus === filter;\r\n    });\r\n\r\n    const stats = {\r\n        total: meetings.length,\r\n        scheduled: meetings.filter(m => {\r\n            const status = m.status?.toLowerCase() || 'scheduled';\r\n            return status === 'scheduled' || \r\n                   status === 'upcoming' || \r\n                   !m.status || \r\n                   status === null;\r\n        }).length,\r\n        in_progress: meetings.filter(m => m.status?.toLowerCase() === 'in_progress').length,\r\n        completed: meetings.filter(m => m.status?.toLowerCase() === 'completed').length,\r\n        cancelled: meetings.filter(m => m.status?.toLowerCase() === 'cancelled').length\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-gray-50\">\r\n            <Sidebar orgId={orgId} />\r\n            <div className=\"flex-1 flex flex-col\">\r\n                <Navbar orgId={orgId} />\r\n                <div className=\"flex-1 p-8 overflow-auto\">\r\n                    <div className=\"flex justify-between items-center mb-6\">\r\n                        <h1 className=\"text-2xl font-bold text-gray-900\">{t('meetings.title')}</h1>\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                onClick={() => setIsQuickMeetingModalOpen(true)}\r\n                                className=\"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 \r\n                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 flex items-center gap-2\"\r\n                            >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                                </svg>\r\n                                {t('meetings.instantMeeting')}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setIsModalOpen(true)}\r\n                                className=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 \r\n                                    focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center gap-2\"\r\n                            >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\" />\r\n                                </svg>\r\n                                {t('meetings.scheduleMeeting')}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-5 gap-4 mb-6\">\r\n                        <div className=\"bg-white rounded-lg shadow p-4\">\r\n                            <div className=\"text-2xl font-bold text-gray-900\">{stats.total}</div>\r\n                            <div className=\"text-sm text-gray-600\">{t('meetings.totalMeetings')}</div>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-lg shadow p-4\">\r\n                            <div className=\"text-2xl font-bold text-yellow-600\">{stats.scheduled}</div>\r\n                            <div className=\"text-sm text-gray-600\">{t('meetings.scheduled')}</div>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-lg shadow p-4\">\r\n                            <div className=\"text-2xl font-bold text-blue-600\">{stats.in_progress}</div>\r\n                            <div className=\"text-sm text-gray-600\">{t('meetings.inProgress')}</div>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-lg shadow p-4\">\r\n                            <div className=\"text-2xl font-bold text-green-600\">{stats.completed}</div>\r\n                            <div className=\"text-sm text-gray-600\">{t('meetings.completed')}</div>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-lg shadow p-4\">\r\n                            <div className=\"text-2xl font-bold text-red-600\">{stats.cancelled}</div>\r\n                            <div className=\"text-sm text-gray-600\">{t('meetings.cancelled')}</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2 mb-6\">\r\n                        <button\r\n                            onClick={() => setFilter('all')}\r\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                filter === 'all' \r\n                                    ? 'bg-blue-600 text-white' \r\n                                    : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                            }`}\r\n                        >\r\n                            {t('meetings.allMeetings')} ({stats.total})\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFilter('scheduled')}\r\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                filter === 'scheduled' \r\n                                    ? 'bg-yellow-600 text-white' \r\n                                    : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                            }`}\r\n                        >\r\n                            {t('meetings.scheduled')} ({stats.scheduled})\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFilter('in_progress')}\r\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                filter === 'in_progress' \r\n                                    ? 'bg-blue-600 text-white' \r\n                                    : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                            }`}\r\n                        >\r\n                            {t('meetings.inProgress')} ({stats.in_progress})\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFilter('completed')}\r\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                filter === 'completed' \r\n                                    ? 'bg-green-600 text-white' \r\n                                    : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                            }`}\r\n                        >\r\n                            {t('meetings.completed')} ({stats.completed})\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setFilter('cancelled')}\r\n                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                                filter === 'cancelled' \r\n                                    ? 'bg-red-600 text-white' \r\n                                    : 'bg-white text-gray-700 hover:bg-gray-100'\r\n                            }`}\r\n                        >\r\n                            {t('meetings.cancelled')} ({stats.cancelled})\r\n                        </button>\r\n                    </div>\r\n\r\n                    {loading ? (\r\n                        <div className=\"text-center text-gray-700\">{t('meetings.loading')}...</div>\r\n                    ) : filteredMeetings.length === 0 ? (\r\n                        <div className=\"text-center py-12\">\r\n                            <div className=\"text-6xl mb-4\">üìπ</div>\r\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n                                {filter === 'all' ? t('meetings.noMeetingsYet') : \r\n                                 filter === 'scheduled' ? t('meetings.noScheduledMeetings') :\r\n                                 filter === 'in_progress' ? t('meetings.noCurrentMeetings') :\r\n                                 filter === 'completed' ? t('meetings.noCompletedMeetings') :\r\n                                 t('meetings.noCancelledMeetings')}\r\n                            </h3>\r\n                            <p className=\"text-gray-600 mb-4\">\r\n                                {filter === 'all' \r\n                                    ? t('meetings.scheduleOrStartMeeting')\r\n                                    : t('meetings.tryChangeFilter')\r\n                                }\r\n                            </p>\r\n                            {filter === 'all' && (\r\n                                <div className=\"flex gap-3 justify-center\">\r\n                                    <button\r\n                                        onClick={() => setIsQuickMeetingModalOpen(true)}\r\n                                        className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n                                    >\r\n                                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                                        </svg>\r\n                                        {t('meetings.instantMeeting')}\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setIsModalOpen(true)}\r\n                                        className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n                                    >\r\n                                        {t('meetings.scheduleMeeting')}\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"max-w-4xl\">\r\n                            {filteredMeetings.map((meeting) => (\r\n                                <EnhancedMeetingListItem \r\n                                    key={meeting.id} \r\n                                    meeting={meeting}\r\n                                    users={users}\r\n                                    onMeetingUpdate={handleMeetingUpdate}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {orgId && (\r\n                    <>\r\n                        <CreateMeetingModal \r\n                            isOpen={isModalOpen}\r\n                            onClose={() => setIsModalOpen(false)}\r\n                            onSuccess={handleSuccess}\r\n                            orgId={orgId}\r\n                        />\r\n\r\n                        <QuickMeetingModal\r\n                            isOpen={isQuickMeetingModalOpen}\r\n                            onClose={() => setIsQuickMeetingModalOpen(false)}\r\n                            onSubmit={handleQuickMeeting}\r\n                            orgId={orgId}\r\n                        />\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { addDoc, collection, getDocs, getDoc, doc } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { app, db } from '@/app/api/firebase';\r\nimport { useStrings } from \"@/app/hooks/useStrings\";\r\nimport ParticipantSelector from './participantSelector';\r\n\r\nconst CreateMeetingModal = ({ isOpen, onClose, onSuccess, orgId, projectId = null }) => {\r\n    const auth = getAuth(app);\r\n    const { t } = useStrings();\r\n    const [users, setUsers] = useState([]);\r\n    const [projects, setProjects] = useState([]);\r\n    const [orgName, setOrgName] = useState('');\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        date: '',\r\n        location: '',\r\n        createdBy: '',\r\n        projectId: projectId || '',\r\n        participants: [],\r\n        description: '',\r\n        status: 'scheduled',\r\n        type: 'regular'\r\n    });\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const usersRef = collection(db, `organizations/${orgId}/users`);\r\n            const usersSnapshot = await getDocs(usersRef);\r\n            const usersList = usersSnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setUsers(usersList);\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n    const fetchProjects = async () => {\r\n        try {\r\n            const projectsRef = collection(db, `organizations/${orgId}/projects`);\r\n            const projectsSnapshot = await getDocs(projectsRef);\r\n            const projectsList = projectsSnapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setProjects(projectsList);\r\n        } catch (error) {\r\n            console.error('Error fetching projects:', error);\r\n        }\r\n    };\r\n\r\n    const fetchOrganizationName = async () => {\r\n        try {\r\n            const orgDoc = await getDoc(doc(db, `organizations/${orgId}`));\r\n            if (orgDoc.exists()) {\r\n                setOrgName(orgDoc.data().name || 'Organization');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching organization:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isOpen && orgId) {\r\n            fetchUsers();\r\n            fetchProjects();\r\n            fetchOrganizationName();\r\n            const currentUser = auth.currentUser;\r\n            if (currentUser) {\r\n                setFormData(prev => ({\r\n                    ...prev,\r\n                    createdBy: currentUser.uid,\r\n                    projectId: projectId || ''\r\n                }));\r\n            }\r\n        }\r\n    }, [isOpen, orgId, projectId]);\r\n\r\n    // Prevent body scroll when modal is open\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            document.body.style.overflow = 'hidden';\r\n        } else {\r\n            document.body.style.overflow = 'unset';\r\n        }\r\n        \r\n        // Cleanup on unmount\r\n        return () => {\r\n            document.body.style.overflow = 'unset';\r\n        };\r\n    }, [isOpen]);\r\n\r\n    const handleParticipantsChange = (participants) => {\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            participants\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            // –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π —Å—Ö–µ–º–µ –ë–î\r\n            const meetingData = {\r\n                title: formData.title,\r\n                datetime: new Date(formData.date).toISOString(),\r\n                location: formData.location || '',\r\n                owner: formData.createdBy,\r\n                projectId: formData.projectId || null,\r\n                participants: formData.participants,\r\n                notes: formData.description || '',\r\n                createdAt: new Date().toISOString(),\r\n                updatedAt: new Date().toISOString()\r\n            };\r\n\r\n            // –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏ –≤ –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\r\n            const meetingsRef = collection(db, `organizations/${orgId}/meetings`);\r\n            await addDoc(meetingsRef, meetingData);\r\n            \r\n            onSuccess();\r\n            onClose();\r\n            \r\n            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã\r\n            setFormData({\r\n                title: '',\r\n                date: '',\r\n                location: '',\r\n                createdBy: auth.currentUser?.uid || '',\r\n                projectId: projectId || '',\r\n                participants: [],\r\n                description: ''\r\n            });\r\n        } catch (error) {\r\n            console.error('Error creating meeting:', error);\r\n            alert('Error creating meeting. Please try again.');\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div \r\n            className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto\"\r\n            onClick={(e) => {\r\n                // Close modal when clicking on backdrop\r\n                if (e.target === e.currentTarget) {\r\n                    onClose();\r\n                }\r\n            }}\r\n        >\r\n            <div \r\n                className=\"bg-white rounded-lg p-6 w-full max-w-md max-h-full overflow-y-auto my-auto mx-auto shadow-xl\"\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900 \">{t('meetings.scheduleMeeting')}</h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"text-gray-500 hover:text-gray-700\"\r\n                    >\r\n                        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                        </svg>\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    {/* –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è - —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è */}\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('projects.organization')}\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={orgName}\r\n                            disabled\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('meetings.meetingTitle')} <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            required\r\n                            value={formData.title}\r\n                            onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900\"\r\n                            placeholder={t('meetings.meetingTitle')}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('meetings.startDate')} <span className=\"text-red-500\">*</span>\r\n                        </label>\r\n                        <input\r\n                            type=\"datetime-local\"\r\n                            required\r\n                            value={formData.date}\r\n                            onChange={(e) => setFormData(prev => ({ ...prev, date: e.target.value }))}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('projects.projectOptional')}\r\n                        </label>\r\n                        <select\r\n                            value={formData.projectId || ''}\r\n                            onChange={(e) => setFormData(prev => ({ ...prev, projectId: e.target.value }))}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900\"\r\n                        >\r\n                            <option value=\"\">{t('projects.noProject')}</option>\r\n                            {projects.map(project => (\r\n                                <option key={project.id} value={project.id}>\r\n                                    {project.title}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('meetings.location')}\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={formData.location}\r\n                            onChange={(e) => setFormData(prev => ({ ...prev, location: e.target.value }))}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900\"\r\n                            placeholder={t('meetings.enterMeetingLocation')}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* –ó–∞–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—ã–π –≤—ã–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞ –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç */}\r\n                    <ParticipantSelector\r\n                        users={users}\r\n                        selectedParticipants={formData.participants}\r\n                        onParticipantsChange={handleParticipantsChange}\r\n                        excludeUserIds={formData.createdBy ? [formData.createdBy] : []}\r\n                        label={t('meetings.participants')}\r\n                        placeholder=\"–ü–æ–∏—Å–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ –∏–º–µ–Ω–∏, email –∏–ª–∏ —Ä–æ–ª–∏...\"\r\n                        maxHeight=\"200px\"\r\n                        showSelectedCount={true}\r\n                        className=\"mb-4\"\r\n                    />\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                            {t('meetings.notes')}\r\n                        </label>\r\n                        <textarea\r\n                            value={formData.description}\r\n                            onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                            rows={3}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-gray-900\"\r\n                            placeholder={t('meetings.addMeetingNotes')}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end gap-3 mt-6\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900\"\r\n                        >\r\n                            {t('meetings.cancel')}\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                        >\r\n                            {t('meetings.createMeeting')}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateMeetingModal;","export const generateCalendarLinks = (meeting) => {\r\n    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π\r\n    const formatDateForCalendar = (dateString, timeString = '00:00') => {\r\n        try {\r\n            const date = new Date(dateString);\r\n            const [hours, minutes] = timeString.split(':');\r\n            date.setHours(parseInt(hours) || 0, parseInt(minutes) || 0, 0, 0);\r\n            return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\r\n        } catch (error) {\r\n            console.error('Error formatting date:', error);\r\n            const now = new Date();\r\n            return now.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\r\n        }\r\n    };\r\n\r\n    const startDateTime = formatDateForCalendar(meeting.date, meeting.time || '00:00');\r\n    \r\n    // –î–æ–±–∞–≤–ª—è–µ–º 1 —á–∞—Å –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è\r\n    const endDate = new Date(meeting.date);\r\n    const [hours, minutes] = (meeting.time || '00:00').split(':');\r\n    endDate.setHours(parseInt(hours) + 1 || 1, parseInt(minutes) || 0, 0, 0);\r\n    const endDateTime = endDate.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\r\n\r\n    // –§–æ—Ä–º–∏—Ä—É–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ\r\n    let description = meeting.description || 'Team meeting';\r\n    if (meeting.conferenceUrl) {\r\n        description += `\\n\\n–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é: ${meeting.conferenceUrl}`;\r\n    }\r\n\r\n    // Google Calendar\r\n    const googleCalendarUrl = new URL('https://calendar.google.com/calendar/render');\r\n    googleCalendarUrl.searchParams.append('action', 'TEMPLATE');\r\n    googleCalendarUrl.searchParams.append('text', meeting.title);\r\n    googleCalendarUrl.searchParams.append('dates', `${startDateTime}/${endDateTime}`);\r\n    googleCalendarUrl.searchParams.append('details', description);\r\n    googleCalendarUrl.searchParams.append('location', meeting.location || 'Online');\r\n\r\n    // Outlook Calendar\r\n    const outlookCalendarUrl = new URL('https://outlook.live.com/calendar/0/deeplink/compose');\r\n    outlookCalendarUrl.searchParams.append('subject', meeting.title);\r\n    outlookCalendarUrl.searchParams.append('body', description);\r\n    outlookCalendarUrl.searchParams.append('startdt', startDateTime);\r\n    outlookCalendarUrl.searchParams.append('enddt', endDateTime);\r\n    outlookCalendarUrl.searchParams.append('location', meeting.location || 'Online');\r\n\r\n    return {\r\n        google: googleCalendarUrl.toString(),\r\n        outlook: outlookCalendarUrl.toString()\r\n    };\r\n};\r\n\r\nexport const downloadICSFile = (meeting) => {\r\n    try {\r\n        const formatDateForICS = (dateString, timeString = '00:00') => {\r\n            const date = new Date(dateString);\r\n            const [hours, minutes] = timeString.split(':');\r\n            date.setHours(parseInt(hours) || 0, parseInt(minutes) || 0, 0, 0);\r\n            return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\r\n        };\r\n\r\n        const startDateTime = formatDateForICS(meeting.date, meeting.time || '00:00');\r\n        \r\n        const endDate = new Date(meeting.date);\r\n        const [hours, minutes] = (meeting.time || '00:00').split(':');\r\n        endDate.setHours(parseInt(hours) + 1 || 1, parseInt(minutes) || 0, 0, 0);\r\n        const endDateTime = endDate.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';\r\n\r\n        let description = meeting.description || 'Team meeting';\r\n        if (meeting.conferenceUrl) {\r\n            description += `\\\\n–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é: ${meeting.conferenceUrl}`;\r\n        }\r\n\r\n        const icsContent = `BEGIN:VCALENDAR\r\nVERSION:2.0\r\nPRODID:-//GeoNote//Meetings//EN\r\nCALSCALE:GREGORIAN\r\nMETHOD:PUBLISH\r\nBEGIN:VEVENT\r\nUID:${meeting.id}@geonote.app\r\nDTSTAMP:${new Date().toISOString().replace(/[-:]/g, '').split('.')[0]}Z\r\nDTSTART:${startDateTime}\r\nDTEND:${endDateTime}\r\nSUMMARY:${meeting.title}\r\nDESCRIPTION:${description.replace(/\\n/g, '\\\\n')}\r\nLOCATION:${meeting.location || 'Online'}\r\nSTATUS:CONFIRMED\r\nSEQUENCE:0\r\nBEGIN:VALARM\r\nTRIGGER:-PT15M\r\nACTION:DISPLAY\r\nDESCRIPTION:–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: ${meeting.title}\r\nEND:VALARM\r\nEND:VEVENT\r\nEND:VCALENDAR`;\r\n\r\n        const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });\r\n        const link = document.createElement('a');\r\n        link.href = window.URL.createObjectURL(blob);\r\n        link.download = `meeting-${meeting.id}.ics`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    } catch (error) {\r\n        console.error('Error creating ICS file:', error);\r\n        throw error;\r\n    }\r\n};","\"use client\";\r\nimport { useState } from 'react';\r\nimport { useStrings } from '@/app/hooks/useStrings';\r\nimport { generateCalendarLinks, downloadICSFile } from '@/app/utils/calendarUtils';\r\n\r\nexport default function CalendarDropdown({ meeting }) {\r\n    const { t } = useStrings();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    \r\n    const handleCalendarAction = (type) => {\r\n    // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é\r\n    console.log('Meeting object:', meeting);\r\n    console.log('Meeting date:', meeting.date);\r\n    console.log('Date type:', typeof meeting.date);\r\n    \r\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤–∞–ª–∏–¥–Ω–∞—è –¥–∞—Ç–∞\r\n    if (!meeting.date) {\r\n        alert('–û—à–∏–±–∫–∞: –¥–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞');\r\n        return;\r\n    }\r\n    \r\n    try {\r\n        const testDate = new Date(meeting.date);\r\n        if (isNaN(testDate.getTime())) {\r\n            alert('–û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –≤—Å—Ç—Ä–µ—á–∏');\r\n            return;\r\n        }\r\n        \r\n        const links = generateCalendarLinks(meeting);\r\n        \r\n        switch (type) {\r\n            case 'google':\r\n                window.open(links.google, '_blank');\r\n                break;\r\n            case 'outlook':\r\n                window.open(links.outlook, '_blank');\r\n                break;\r\n            case 'apple':\r\n            case 'ics':\r\n                downloadICSFile(meeting);\r\n                break;\r\n        }\r\n        \r\n        setIsOpen(false);\r\n        \r\n        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\r\n        if (typeof window !== 'undefined') {\r\n            alert(t('meetings.calendarAdded'));\r\n        }\r\n    } catch (error) {\r\n        console.error('Calendar action error:', error);\r\n        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å');\r\n    }\r\n};\r\n    \r\n    return (\r\n        <div className=\"relative\">\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"inline-flex items-center px-3 py-2 border border-gray-300  \r\n                    rounded-md shadow-sm bg-white text-sm font-medium \r\n                    text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\r\n            >\r\n                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" \r\n                        d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                </svg>\r\n                {t('meetings.addToCalendar')}\r\n                <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n                </svg>\r\n            </button>\r\n            \r\n            {isOpen && (\r\n                <div className=\"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10\">\r\n                    <div className=\"py-1\">\r\n                        <button\r\n                            onClick={() => handleCalendarAction('google')}\r\n                            className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700\r\n                                hover:bg-gray-100 dark:hover:bg-gray-600\"\r\n                        >\r\n                            <svg className=\"w-4 h-4 mr-3\" viewBox=\"0 0 24 24\">\r\n                                <path fill=\"#4285f4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\r\n                                <path fill=\"#34a853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\r\n                                <path fill=\"#fbbc05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\r\n                                <path fill=\"#ea4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\r\n                            </svg>\r\n                            {t('meetings.googleCalendar')}\r\n                        </button>\r\n                        \r\n                        <button\r\n                            onClick={() => handleCalendarAction('outlook')}\r\n                            className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700\r\n                                hover:bg-gray-100\"\r\n                        >\r\n                            <svg className=\"w-4 h-4 mr-3\" viewBox=\"0 0 24 24\">\r\n                                <path fill=\"#0078d4\" d=\"M12 0C8.5 0 5.7 2.8 5.7 6.3v11.4C5.7 21.2 8.5 24 12 24s6.3-2.8 6.3-6.3V6.3C18.3 2.8 15.5 0 12 0zm3.6 13.8h-3.2v4.7c0 .4-.3.7-.7.7s-.7-.3-.7-.7v-4.7H7.8c-.4 0-.7-.3-.7-.7s.3-.7.7-.7H11v-2.8H7.8c-.4 0-.7-.3-.7-.7s.3-.7.7-.7H11V5.5c0-.4.3-.7.7-.7s.7.3.7.7v2.8h3.2c.4 0 .7.3.7.7s-.3.7-.7.7h-3.2v2.8h3.2c.4 0 .7.3.7.7s-.3.7-.7.7z\"/>\r\n                            </svg>\r\n                            {t('meetings.outlookCalendar')}\r\n                        </button>\r\n                        \r\n                        <button\r\n                            onClick={() => handleCalendarAction('apple')}\r\n                            className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700\r\n                                hover:bg-gray-100\"\r\n                        >\r\n                            <svg className=\"w-4 h-4 mr-3\" viewBox=\"0 0 24 24\">\r\n                                <path fill=\"currentColor\" d=\"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z\"/>\r\n                            </svg>\r\n                            {t('meetings.appleCalendar')}\r\n                        </button>\r\n                        \r\n                        <div className=\"border-t border-gray-100\"></div>\r\n                        \r\n                        <button\r\n                            onClick={() => handleCalendarAction('ics')}\r\n                            className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 \r\n                                hover:bg-gray-100\"\r\n                        >\r\n                            <svg className=\"w-4 h-4 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" \r\n                                    d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                            </svg>\r\n                            {t('meetings.downloadICS')}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}","\"use client\";\r\nimport { useStrings } from \"../hooks/useStrings\";\r\nimport CalendarDropdown from \"./CalendarDropdown\";\r\n\r\nconst MeetingListItem = ({ meeting, users }) => {\r\n    const { t, language } = useStrings();\r\n\r\n    // –ü–æ–ª—É—á–∞–µ–º –ª–æ–∫–∞–ª—å –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —è–∑—ã–∫–∞\r\n    const getLocale = () => {\r\n        switch (language) {\r\n            case 'ru': return 'ru-RU';\r\n            case 'en': return 'en-GB';\r\n            case 'uz': return 'uz-UZ';\r\n            default: return 'en-GB';\r\n        }\r\n    };\r\n\r\n    const formatDateTime = (datetime) => {\r\n        if (!datetime) return '';\r\n        try {\r\n            const date = new Date(datetime);\r\n            return {\r\n                datetime: date.toLocaleDateString(getLocale(), {\r\n                    day: '2-digit',\r\n                    month: '2-digit',\r\n                    year: 'numeric'\r\n                }),\r\n                time: date.toLocaleTimeString(getLocale(), {\r\n                    hour: '2-digit',\r\n                    minute: '2-digit'\r\n                })\r\n            };\r\n        } catch (error) {\r\n            return { datetime: '', time: '' };\r\n        }\r\n    };\r\n\r\n    const { datetime, time } = formatDateTime(meeting.datetime);\r\n\r\n    return (\r\n        <div className=\"bg-white  rounded-lg border-2 border-gray-300  mb-4 hover:shadow-md transition-shadow\">\r\n            <div className=\"p-6\">\r\n                <div className=\"flex justify-between items-start mb-3\">\r\n                    <div>\r\n                        <h3 className=\"text-xl font-semibold text-gray-800\">{meeting.title}</h3>\r\n                        <div className=\"flex items-center gap-3 mt-2\">\r\n                            <span className=\"text-sm text-gray-600\">{datetime}</span>\r\n                            <span className=\"text-sm font-semibold text-blue-600\">{time}</span>\r\n                        </div>\r\n                    </div>\r\n                    <CalendarDropdown meeting={meeting} />\r\n                </div>\r\n\r\n                {meeting.location && (\r\n                    <div className=\"mb-2 flex items-center gap-2 text-sm text-gray-600\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                        </svg>\r\n                        <span>{meeting.location}</span>\r\n                    </div>\r\n                )}\r\n\r\n                {meeting.owner && (\r\n                    <div className=\"mb-2 text-sm text-gray-600\">\r\n                        <span className=\"font-medium\">{t('meetings.organizer')}:</span> {users?.[meeting.owner] || meeting.owner}\r\n                    </div>\r\n                )}\r\n\r\n                {meeting.participants && meeting.participants.length > 0 && (\r\n                    <div className=\"mt-3\">\r\n                        <span className=\"text-sm font-medium text-gray-700\">{t('meetings.participants')}: </span>\r\n                        <span className=\"text-sm text-gray-600\">\r\n                            {meeting.participants.map(p => users?.[p] || p).join(', ')}\r\n                        </span>\r\n                    </div>\r\n                )}\r\n\r\n                {meeting.notes && (\r\n                    <div className=\"mt-3 text-sm text-gray-600\">\r\n                        <p className=\"line-clamp-2\">{meeting.notes}</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MeetingListItem;"],"names":[],"mappings":"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"}
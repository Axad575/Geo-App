{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/components/GeologicalLogTool.js","../../../../app/pages/projects/%5Bid%5D/notes/%5BnoteId%5D/edit/page.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { useStrings } from \"@/app/hooks/useStrings\";\r\n\r\nconst GeologicalLogTool = ({ onSave, initialData = null }) => {\r\n    const { t } = useStrings();\r\n    const canvasRef = useRef(null);\r\n    const [logData, setLogData] = useState({\r\n        wellName: '',\r\n        location: '',\r\n        elevation: '',\r\n        totalDepth: '',\r\n        scale: 100,\r\n        layers: initialData?.layers || []\r\n    });\r\n\r\n    const [currentLayer, setCurrentLayer] = useState({\r\n        depthFrom: '',\r\n        depthTo: '',\r\n        lithology: 'sandstone',\r\n        color: '#F4D03F',\r\n        description: '',\r\n        grain_size: 'medium',\r\n        fossils: '',\r\n        remarks: ''\r\n    });\r\n\r\n    const [showGrid, setShowGrid] = useState(true);\r\n    const [selectedLayer, setSelectedLayer] = useState(null);\r\n\r\n    // –¢–∏–ø—ã –ª–∏—Ç–æ–ª–æ–≥–∏–∏ —Å —Ü–≤–µ—Ç–∞–º–∏ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏\r\n    const lithologyTypes = {\r\n        sandstone: { name: t('geologicalLog.sandstone'), color: '#F4D03F', pattern: 'dots' },\r\n        limestone: { name: t('geologicalLog.limestone'), color: '#85C1E2', pattern: 'brick' },\r\n        shale: { name: t('geologicalLog.shale'), color: '#95A5A6', pattern: 'horizontal' },\r\n        clay: { name: t('geologicalLog.clay'), color: '#D4AC6E', pattern: 'solid' },\r\n        coal: { name: t('geologicalLog.coal'), color: '#34495E', pattern: 'solid' },\r\n        granite: { name: t('geologicalLog.granite'), color: '#E8A798', pattern: 'crosses' },\r\n        conglomerate: { name: t('geologicalLog.conglomerate'), color: '#BDC3C7', pattern: 'circles' },\r\n        marl: { name: t('geologicalLog.marl'), color: '#AED6F1', pattern: 'wavy' },\r\n        dolomite: { name: t('geologicalLog.dolomite'), color: '#F8B88B', pattern: 'brick' },\r\n        gypsum: { name: t('geologicalLog.gypsum'), color: '#FAD7A0', pattern: 'diagonal' }\r\n    };\r\n\r\n    const grainSizes = {\r\n        'very_fine': t('geologicalLog.veryFine'),\r\n        'fine': t('geologicalLog.fine'),\r\n        'medium': t('geologicalLog.medium'),\r\n        'coarse': t('geologicalLog.coarse'),\r\n        'very_coarse': t('geologicalLog.veryCoarse')\r\n    };\r\n\r\n    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è\r\n    const handleAddLayer = () => {\r\n        if (!currentLayer.depthFrom || !currentLayer.depthTo) {\r\n            alert(t('geologicalLog.enterDepth'));\r\n            return;\r\n        }\r\n\r\n        const from = parseFloat(currentLayer.depthFrom);\r\n        const to = parseFloat(currentLayer.depthTo);\r\n\r\n        if (from >= to) {\r\n            alert(t('geologicalLog.depthError'));\r\n            return;\r\n        }\r\n\r\n        const newLayer = {\r\n            id: Date.now().toString(),\r\n            ...currentLayer,\r\n            depthFrom: from,\r\n            depthTo: to,\r\n            color: lithologyTypes[currentLayer.lithology].color\r\n        };\r\n\r\n        setLogData(prev => ({\r\n            ...prev,\r\n            layers: [...prev.layers, newLayer].sort((a, b) => a.depthFrom - b.depthFrom)\r\n        }));\r\n\r\n        setCurrentLayer({\r\n            depthFrom: to.toString(),\r\n            depthTo: '',\r\n            lithology: 'sandstone',\r\n            color: '#F4D03F',\r\n            description: '',\r\n            grain_size: 'medium',\r\n            fossils: '',\r\n            remarks: ''\r\n        });\r\n    };\r\n\r\n    // –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ—è\r\n    const handleDeleteLayer = (layerId) => {\r\n        if (window.confirm(t('geologicalLog.deleteLayer'))) {\r\n            setLogData(prev => ({\r\n                ...prev,\r\n                layers: prev.layers.filter(l => l.id !== layerId)\r\n            }));\r\n            if (selectedLayer === layerId) {\r\n                setSelectedLayer(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    // –†–∏—Å–æ–≤–∞–Ω–∏–µ –Ω–∞ canvas\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        const width = canvas.width;\r\n        const height = canvas.height;\r\n\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.fillRect(0, 0, width, height);\r\n\r\n        const leftMargin = 60;\r\n        const rightMargin = 50;\r\n        const topMargin = 80;\r\n        const logWidth = width - leftMargin - rightMargin;\r\n        const scale = logData.scale;\r\n\r\n        // –ó–∞–≥–æ–ª–æ–≤–æ–∫\r\n        ctx.fillStyle = '#000';\r\n        ctx.font = 'bold 16px Arial';\r\n        ctx.textAlign = 'left';\r\n        ctx.fillText(logData.wellName || t('geologicalLog.title'), leftMargin, 20);\r\n        \r\n        ctx.font = '11px Arial';\r\n        let headerY = 35;\r\n        if (logData.location) {\r\n            ctx.fillText(`${t('geologicalLog.location')}: ${logData.location}`, leftMargin, headerY);\r\n            headerY += 14;\r\n        }\r\n        if (logData.elevation) {\r\n            ctx.fillText(`${t('geologicalLog.elevation')}: ${logData.elevation} –º`, leftMargin, headerY);\r\n            headerY += 14;\r\n        }\r\n        if (logData.totalDepth) {\r\n            ctx.fillText(`${t('geologicalLog.totalDepth')}: ${logData.totalDepth} –º`, leftMargin, headerY);\r\n        }\r\n\r\n        // –°–µ—Ç–∫–∞ –∏ –≥–ª—É–±–∏–Ω—ã\r\n        if (showGrid) {\r\n            ctx.strokeStyle = '#ddd';\r\n            ctx.lineWidth = 1;\r\n\r\n            const maxDepth = parseFloat(logData.totalDepth) || \r\n                            Math.max(...logData.layers.map(l => l.depthTo), 100);\r\n\r\n            for (let depth = 0; depth <= maxDepth; depth += 10) {\r\n                const y = topMargin + (depth * scale / 10);\r\n                \r\n                ctx.beginPath();\r\n                ctx.moveTo(leftMargin, y);\r\n                ctx.lineTo(width - rightMargin, y);\r\n                ctx.stroke();\r\n\r\n                ctx.fillStyle = '#000';\r\n                ctx.font = '10px Arial';\r\n                ctx.textAlign = 'right';\r\n                ctx.fillText(`${depth}m`, leftMargin - 5, y + 4);\r\n            }\r\n        }\r\n        \r\n        if (!showGrid && logData.layers.length > 0) {\r\n            ctx.fillStyle = '#000';\r\n            ctx.font = '10px Arial';\r\n            ctx.textAlign = 'right';\r\n            \r\n            const uniqueDepths = new Set();\r\n            logData.layers.forEach(layer => {\r\n                uniqueDepths.add(layer.depthFrom);\r\n                uniqueDepths.add(layer.depthTo);\r\n            });\r\n            \r\n            Array.from(uniqueDepths).sort((a, b) => a - b).forEach(depth => {\r\n                const y = topMargin + (depth * scale / 10);\r\n                ctx.fillText(`${depth}m`, leftMargin - 5, y + 4);\r\n            });\r\n        }\r\n\r\n        // –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤\r\n        logData.layers.forEach(layer => {\r\n            const yStart = topMargin + (layer.depthFrom * scale / 10);\r\n            const yEnd = topMargin + (layer.depthTo * scale / 10);\r\n            const layerHeight = yEnd - yStart;\r\n\r\n            ctx.fillStyle = layer.color;\r\n            ctx.fillRect(leftMargin, yStart, logWidth, layerHeight);\r\n\r\n            drawPattern(ctx, leftMargin, yStart, logWidth, layerHeight, \r\n                       lithologyTypes[layer.lithology].pattern, layer.color);\r\n\r\n            ctx.strokeStyle = '#000';\r\n            ctx.lineWidth = 2;\r\n            ctx.strokeRect(leftMargin, yStart, logWidth, layerHeight);\r\n\r\n            if (selectedLayer === layer.id) {\r\n                ctx.strokeStyle = '#e74c3c';\r\n                ctx.lineWidth = 3;\r\n                ctx.strokeRect(leftMargin, yStart, logWidth, layerHeight);\r\n            }\r\n\r\n            if (layerHeight > 20) {\r\n                ctx.fillStyle = '#000';\r\n                ctx.font = 'bold 11px Arial';\r\n                ctx.textAlign = 'center';\r\n                const text = lithologyTypes[layer.lithology].name;\r\n                ctx.fillText(text, leftMargin + logWidth / 2, yStart + layerHeight / 2 - 5);\r\n                \r\n                if (layer.grain_size) {\r\n                    ctx.font = '9px Arial';\r\n                    ctx.fillText(`(${grainSizes[layer.grain_size]})`, leftMargin + logWidth / 2, yStart + layerHeight / 2 + 8);\r\n                }\r\n            }\r\n\r\n            if (layer.description) {\r\n                ctx.fillStyle = '#000';\r\n                ctx.font = '10px Arial';\r\n                ctx.textAlign = 'left';\r\n                const maxWidth = rightMargin - 10;\r\n                const words = layer.description.split(' ');\r\n                let line = '';\r\n                let lineY = yStart + 12;\r\n\r\n                words.forEach(word => {\r\n                    const testLine = line + word + ' ';\r\n                    const metrics = ctx.measureText(testLine);\r\n                    if (metrics.width > maxWidth && line !== '') {\r\n                        ctx.fillText(line, width - rightMargin + 5, lineY);\r\n                        line = word + ' ';\r\n                        lineY += 12;\r\n                    } else {\r\n                        line = testLine;\r\n                    }\r\n                });\r\n                ctx.fillText(line, width - rightMargin + 5, lineY);\r\n            }\r\n        });\r\n\r\n        drawLegend(ctx, width, height);\r\n\r\n    }, [logData, showGrid, selectedLayer, t]);\r\n\r\n    const drawPattern = (ctx, x, y, width, height, pattern, baseColor) => {\r\n        ctx.save();\r\n        ctx.strokeStyle = adjustColor(baseColor, -40);\r\n        ctx.lineWidth = 1;\r\n\r\n        switch (pattern) {\r\n            case 'dots':\r\n                for (let i = 0; i < width; i += 10) {\r\n                    for (let j = 0; j < height; j += 10) {\r\n                        ctx.fillStyle = adjustColor(baseColor, -40);\r\n                        ctx.beginPath();\r\n                        ctx.arc(x + i + 5, y + j + 5, 2, 0, Math.PI * 2);\r\n                        ctx.fill();\r\n                    }\r\n                }\r\n                break;\r\n            case 'horizontal':\r\n                for (let j = 0; j < height; j += 5) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(x, y + j);\r\n                    ctx.lineTo(x + width, y + j);\r\n                    ctx.stroke();\r\n                }\r\n                break;\r\n            case 'brick':\r\n                for (let j = 0; j < height; j += 10) {\r\n                    const offset = (j / 10) % 2 === 0 ? 0 : 15;\r\n                    for (let i = offset; i < width; i += 30) {\r\n                        ctx.strokeRect(x + i, y + j, 25, 8);\r\n                    }\r\n                }\r\n                break;\r\n            case 'crosses':\r\n                for (let i = 0; i < width; i += 15) {\r\n                    for (let j = 0; j < height; j += 15) {\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(x + i, y + j - 5);\r\n                        ctx.lineTo(x + i, y + j + 5);\r\n                        ctx.moveTo(x + i - 5, y + j);\r\n                        ctx.lineTo(x + i + 5, y + j);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                break;\r\n            case 'circles':\r\n                for (let i = 0; i < width; i += 15) {\r\n                    for (let j = 0; j < height; j += 15) {\r\n                        ctx.beginPath();\r\n                        ctx.arc(x + i, y + j, 4, 0, Math.PI * 2);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                break;\r\n            case 'diagonal':\r\n                for (let i = -height; i < width; i += 10) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(x + i, y + height);\r\n                    ctx.lineTo(x + i + height, y);\r\n                    ctx.stroke();\r\n                }\r\n                break;\r\n            case 'wavy':\r\n                for (let j = 0; j < height; j += 8) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(x, y + j);\r\n                    for (let i = 0; i < width; i += 5) {\r\n                        ctx.lineTo(x + i, y + j + Math.sin(i / 5) * 2);\r\n                    }\r\n                    ctx.stroke();\r\n                }\r\n                break;\r\n        }\r\n        ctx.restore();\r\n    };\r\n\r\n    const adjustColor = (color, amount) => {\r\n        const num = parseInt(color.replace('#', ''), 16);\r\n        const r = Math.max(0, Math.min(255, (num >> 16) + amount));\r\n        const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));\r\n        const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));\r\n        return `#${((r << 16) | (g << 8) | b).toString(16).padStart(6, '0')}`;\r\n    };\r\n\r\n    const drawLegend = (ctx, width, height) => {\r\n        const usedLithologies = [...new Set(logData.layers.map(layer => layer.lithology))];\r\n        \r\n        if (usedLithologies.length === 0) return;\r\n        \r\n        const legendX = 10;\r\n        const legendHeight = 30 + (usedLithologies.length * 20) + 10;\r\n        const legendY = height - legendHeight - 10;\r\n        \r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';\r\n        ctx.fillRect(legendX, legendY, 200, legendHeight);\r\n        ctx.strokeStyle = '#000';\r\n        ctx.lineWidth = 1;\r\n        ctx.strokeRect(legendX, legendY, 200, legendHeight);\r\n\r\n        ctx.fillStyle = '#000';\r\n        ctx.font = 'bold 12px Arial';\r\n        ctx.textAlign = 'left';\r\n        ctx.fillText(t('geologicalLog.legend') + ':', legendX + 10, legendY + 20);\r\n\r\n        ctx.font = '10px Arial';\r\n        let yOffset = 35;\r\n        usedLithologies.forEach(lithologyKey => {\r\n            const lithology = lithologyTypes[lithologyKey];\r\n            \r\n            ctx.fillStyle = lithology.color;\r\n            ctx.fillRect(legendX + 10, legendY + yOffset, 20, 15);\r\n            ctx.strokeStyle = '#000';\r\n            ctx.lineWidth = 1;\r\n            ctx.strokeRect(legendX + 10, legendY + yOffset, 20, 15);\r\n            \r\n            ctx.fillStyle = '#000';\r\n            ctx.fillText(lithology.name, legendX + 35, legendY + yOffset + 11);\r\n            yOffset += 20;\r\n        });\r\n    };\r\n\r\n    const handleExport = () => {\r\n        const canvas = canvasRef.current;\r\n        const link = document.createElement('a');\r\n        link.download = `geological_log_${Date.now()}.png`;\r\n        link.href = canvas.toDataURL();\r\n        link.click();\r\n    };\r\n\r\n    const handleSave = () => {\r\n        if (onSave) {\r\n            onSave({\r\n                ...logData,\r\n                canvas: canvasRef.current.toDataURL()\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                <h2 className=\"text-2xl font-bold\">{t('geologicalLog.title')}</h2>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={handleExport}\r\n                        className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm\"\r\n                    >\r\n                        üì• {t('geologicalLog.exportPNG')}\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSave}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\r\n                    >\r\n                        üíæ {t('geologicalLog.save')}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ */}\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                        <h3 className=\"font-semibold mb-3\">{t('geologicalLog.generalData')}</h3>\r\n                        <div className=\"space-y-3\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium mb-1\">{t('geologicalLog.wellName')}</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={logData.wellName}\r\n                                    onChange={(e) => setLogData(prev => ({ ...prev, wellName: e.target.value }))}\r\n                                    className=\"w-full px-3 py-2 border rounded-lg text-sm\"\r\n                                    placeholder={t('geologicalLog.wellNamePlaceholder')}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium mb-1\">{t('geologicalLog.location')}</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={logData.location}\r\n                                    onChange={(e) => setLogData(prev => ({ ...prev, location: e.target.value }))}\r\n                                    className=\"w-full px-3 py-2 border rounded-lg text-sm\"\r\n                                    placeholder={t('geologicalLog.locationPlaceholder')}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium mb-1\">{t('geologicalLog.elevation')}</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={logData.elevation}\r\n                                    onChange={(e) => setLogData(prev => ({ ...prev, elevation: e.target.value }))}\r\n                                    className=\"w-full px-3 py-2 border rounded-lg text-sm\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium mb-1\">{t('geologicalLog.totalDepth')}</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={logData.totalDepth}\r\n                                    onChange={(e) => setLogData(prev => ({ ...prev, totalDepth: e.target.value }))}\r\n                                    className=\"w-full px-3 py-2 border rounded-lg text-sm\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={showGrid}\r\n                                    onChange={(e) => setShowGrid(e.target.checked)}\r\n                                    className=\"mr-2\"\r\n                                />\r\n                                <label className=\"text-sm\">{t('geologicalLog.showGrid')}</label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è */}\r\n                    <div className=\"bg-blue-50 p-4 rounded-lg\">\r\n                        <h3 className=\"font-semibold mb-3\">{t('geologicalLog.addLayer')}</h3>\r\n                        <div className=\"space-y-3\">\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium mb-1\">{t('geologicalLog.depthFrom')}</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        step=\"0.1\"\r\n                                        value={currentLayer.depthFrom}\r\n                                        onChange={(e) => setCurrentLayer(prev => ({ ...prev, depthFrom: e.target.value }))}\r\n                                        className=\"w-full px-2 py-1 border rounded text-sm\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium mb-1\">{t('geologicalLog.depthTo')}</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        step=\"0.1\"\r\n                                        value={currentLayer.depthTo}\r\n                                        onChange={(e) => setCurrentLayer(prev => ({ ...prev, depthTo: e.target.value }))}\r\n                                        className=\"w-full px-2 py-1 border rounded text-sm\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-medium mb-1\">{t('geologicalLog.lithology')}</label>\r\n                                <select\r\n                                    value={currentLayer.lithology}\r\n                                    onChange={(e) => setCurrentLayer(prev => ({ \r\n                                        ...prev, \r\n                                        lithology: e.target.value,\r\n                                        color: lithologyTypes[e.target.value].color\r\n                                    }))}\r\n                                    className=\"w-full px-2 py-1 border rounded text-sm\"\r\n                                >\r\n                                    {Object.entries(lithologyTypes).map(([key, value]) => (\r\n                                        <option key={key} value={key}>{value.name}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-medium mb-1\">{t('geologicalLog.grainSize')}</label>\r\n                                <select\r\n                                    value={currentLayer.grain_size}\r\n                                    onChange={(e) => setCurrentLayer(prev => ({ ...prev, grain_size: e.target.value }))}\r\n                                    className=\"w-full px-2 py-1 border rounded text-sm\"\r\n                                >\r\n                                    {Object.entries(grainSizes).map(([key, value]) => (\r\n                                        <option key={key} value={key}>{value}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-medium mb-1\">{t('geologicalLog.description')}</label>\r\n                                <textarea\r\n                                    value={currentLayer.description}\r\n                                    onChange={(e) => setCurrentLayer(prev => ({ ...prev, description: e.target.value }))}\r\n                                    className=\"w-full px-2 py-1 border rounded text-sm\"\r\n                                    rows=\"2\"\r\n                                    placeholder={t('geologicalLog.descriptionPlaceholder')}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-xs font-medium mb-1\">{t('geologicalLog.fossils')}</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={currentLayer.fossils}\r\n                                    onChange={(e) => setCurrentLayer(prev => ({ ...prev, fossils: e.target.value }))}\r\n                                    className=\"w-full px-2 py-1 border rounded text-sm\"\r\n                                    placeholder={t('geologicalLog.fossilsPlaceholder')}\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                onClick={handleAddLayer}\r\n                                className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium\"\r\n                            >\r\n                                + {t('geologicalLog.addLayerButton')}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* –°–ø–∏—Å–æ–∫ —Å–ª–æ–µ–≤ */}\r\n                    <div className=\"bg-gray-50 p-4 rounded-lg max-h-96 overflow-y-auto\">\r\n                        <h3 className=\"font-semibold mb-3\">{t('geologicalLog.layers')} ({logData.layers.length})</h3>\r\n                        {logData.layers.length === 0 ? (\r\n                            <p className=\"text-sm text-gray-500\">{t('geologicalLog.noLayers')}</p>\r\n                        ) : (\r\n                            <div className=\"space-y-2\">\r\n                                {logData.layers.map(layer => (\r\n                                    <div\r\n                                        key={layer.id}\r\n                                        onClick={() => setSelectedLayer(layer.id)}\r\n                                        className={`p-2 rounded cursor-pointer ${\r\n                                            selectedLayer === layer.id ? 'bg-blue-100 border-2 border-blue-500' : 'bg-white'\r\n                                        }`}\r\n                                    >\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex items-center gap-2 mb-1\">\r\n                                                    <div\r\n                                                        className=\"w-4 h-4 rounded border\"\r\n                                                        style={{ backgroundColor: layer.color }}\r\n                                                    />\r\n                                                    <span className=\"text-xs font-medium\">\r\n                                                        {lithologyTypes[layer.lithology].name}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <div className=\"text-xs text-gray-600\">\r\n                                                    {layer.depthFrom}m - {layer.depthTo}m\r\n                                                </div>\r\n                                                {layer.description && (\r\n                                                    <div className=\"text-xs text-gray-500 mt-1 truncate\">\r\n                                                        {layer.description}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <button\r\n                                                onClick={(e) => {\r\n                                                    e.stopPropagation();\r\n                                                    handleDeleteLayer(layer.id);\r\n                                                }}\r\n                                                className=\"text-red-500 hover:text-red-700 p-1\"\r\n                                            >\r\n                                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                                </svg>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Canvas –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–æ–≥–∞ */}\r\n                <div className=\"lg:col-span-2\">\r\n                    <div className=\"bg-gray-100 rounded-lg p-4 overflow-auto\">\r\n                        <canvas\r\n                            ref={canvasRef}\r\n                            width={600}\r\n                            height={800}\r\n                            className=\"border border-gray-300 bg-white mx-auto\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */}\r\n            <div className=\"mt-6 p-4 bg-yellow-50 border-2 border-yellow-400 rounded-lg\">\r\n                <div className=\"flex items-start gap-3\">\r\n                    <svg className=\"w-6 h-6 text-yellow-600 shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n                    </svg>\r\n                    <div>\r\n                        <p className=\"font-semibold text-yellow-900 mb-1\">‚ö†Ô∏è {t('geologicalLog.warningTitle')}</p>\r\n                        <p className=\"text-sm text-yellow-800\">\r\n                            {t('geologicalLog.warningText')} <strong>\"üíæ {t('geologicalLog.warningButton')}\"</strong>. \r\n                            {' '}{t('geologicalLog.warningFooter')}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GeologicalLogTool;\r\n","\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { app, db, storage } from '@/app/api/firebase';\r\nimport { doc, getDoc, updateDoc, collection, getDocs, arrayRemove, arrayUnion } from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { useStrings } from \"@/app/hooks/useStrings\";\r\nimport GeologicalLogTool from '@/app/components/GeologicalLogTool';\r\n\r\nconst EditNotePage = () => {\r\n    const { t } = useStrings();\r\n    const router = useRouter();\r\n    const params = useParams();\r\n    const auth = getAuth(app);\r\n    \r\n    const projectId = params.id;\r\n    const noteId = params.noteId;\r\n    const [orgId, setOrgId] = useState(null);\r\n    const [project, setProject] = useState(null);\r\n    const [originalNote, setOriginalNote] = useState(null);\r\n    const [users, setUsers] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [saving, setSaving] = useState(false);\r\n    \r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        description: '',\r\n        locationId: ''\r\n    });\r\n    const [attachedFiles, setAttachedFiles] = useState([]);\r\n    const [uploadingFiles, setUploadingFiles] = useState(false);\r\n    const [geologicalLog, setGeologicalLog] = useState(null);\r\n    const [showLogTool, setShowLogTool] = useState(false);\r\n\r\n    // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\r\n    const getCurrentUserOrg = async (userId) => {\r\n        try {\r\n            const organizationsSnapshot = await getDocs(collection(db, 'organizations'));\r\n            \r\n            for (const orgDoc of organizationsSnapshot.docs) {\r\n                const userInOrgDoc = await getDoc(doc(db, `organizations/${orgDoc.id}/users/${userId}`));\r\n                if (userInOrgDoc.exists()) {\r\n                    return orgDoc.id;\r\n                }\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error('Error fetching user organization:', error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞\r\n    const fetchProject = async (organizationId) => {\r\n        try {\r\n            const projectDoc = await getDoc(doc(db, `organizations/${organizationId}/projects/${projectId}`));\r\n            if (projectDoc.exists()) {\r\n                const projectData = { id: projectDoc.id, ...projectDoc.data() };\r\n                setProject(projectData);\r\n                \r\n                // –ù–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–º–µ—Ç–∫—É\r\n                const foundNote = projectData.notes?.find(n => n.id === noteId);\r\n                if (foundNote) {\r\n                    setOriginalNote(foundNote);\r\n                    setFormData({\r\n                        title: foundNote.title || '',\r\n                        description: foundNote.description || '',\r\n                        locationId: foundNote.location?.id || ''\r\n                    });\r\n                    setAttachedFiles(foundNote.attachments || []);\r\n                    setGeologicalLog(foundNote.geologicalLog || null);\r\n                } else {\r\n                    console.error('Note not found');\r\n                    router.push(`/pages/projects/${projectId}`);\r\n                }\r\n            } else {\r\n                console.error('Project not found');\r\n                router.push('/pages/projects');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching project:', error);\r\n        }\r\n    };\r\n\r\n    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏\r\n    const fetchUsers = async (organizationId) => {\r\n        try {\r\n            const usersSnapshot = await getDocs(collection(db, `organizations/${organizationId}/users`));\r\n            const usersMap = {};\r\n            usersSnapshot.docs.forEach(doc => {\r\n                usersMap[doc.id] = doc.data().name || doc.data().email;\r\n            });\r\n            setUsers(usersMap);\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const initPage = async () => {\r\n            const user = auth.currentUser;\r\n            if (!user) {\r\n                router.push('/auth/login');\r\n                return;\r\n            }\r\n\r\n            const userOrgId = await getCurrentUserOrg(user.uid);\r\n            if (userOrgId) {\r\n                setOrgId(userOrgId);\r\n                await fetchProject(userOrgId);\r\n                await fetchUsers(userOrgId);\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        initPage();\r\n    }, [projectId, noteId]);\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞\r\n    const uploadProjectFile = async (file, projectId, noteId) => {\r\n        try {\r\n            const timestamp = Date.now();\r\n            const sanitizedName = file.name.replace(/[^a-zA-Z0-9.-]/g, '_');\r\n            const path = `projects/${projectId}/notes/${noteId}/files/${timestamp}_${sanitizedName}`;\r\n            \r\n            const fileRef = ref(storage, path);\r\n            const snapshot = await uploadBytes(fileRef, file);\r\n            const downloadURL = await getDownloadURL(snapshot.ref);\r\n            \r\n            return {\r\n                url: downloadURL,\r\n                path: path,\r\n                name: file.name,\r\n                size: file.size,\r\n                type: file.type,\r\n                uploadedAt: new Date().toISOString(),\r\n                uploadedBy: auth.currentUser?.uid || ''\r\n            };\r\n        } catch (error) {\r\n            console.error('Error uploading file:', error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤\r\n    const handleFileSelect = async (files) => {\r\n        if (!files || files.length === 0) return;\r\n        \r\n        setUploadingFiles(true);\r\n        const uploadedFiles = [];\r\n        \r\n        try {\r\n            for (const file of Array.from(files)) {\r\n                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–º–∞–∫—Å–∏–º—É–º 10MB)\r\n                if (file.size > 10 * 1024 * 1024) {\r\n                    alert(t('notes.fileTooLarge').replace('{fileName}', file.name));\r\n                    continue;\r\n                }\r\n                \r\n                const uploadedFile = await uploadProjectFile(file, projectId, noteId);\r\n                uploadedFiles.push(uploadedFile);\r\n            }\r\n            \r\n            setAttachedFiles(prev => [...prev, ...uploadedFiles]);\r\n        } catch (error) {\r\n            console.error('File upload error:', error);\r\n            alert(t('notes.fileUploadError'));\r\n        } finally {\r\n            setUploadingFiles(false);\r\n        }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞\r\n    const removeFile = (index) => {\r\n        setAttachedFiles(prev => prev.filter((_, i) => i !== index));\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ —Ñ–∞–π–ª–∞\r\n    const getFileIcon = (file) => {\r\n        if (file.type?.startsWith('image/')) return 'üñºÔ∏è';\r\n        if (file.type?.includes('pdf')) return 'üìÑ';\r\n        if (file.name?.endsWith('.kml') || file.name?.endsWith('.gpx')) return 'üó∫Ô∏è';\r\n        return 'üìé';\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –¥–µ–π—Å—Ç–≤–∏–π\r\n    const addToHistory = async (action, details) => {\r\n        try {\r\n            const historyEntry = {\r\n                id: Date.now().toString(),\r\n                action: action,\r\n                details: details,\r\n                author: auth.currentUser?.uid || '',\r\n                authorName: users[auth.currentUser?.uid] || auth.currentUser?.email || 'Unknown',\r\n                timestamp: new Date().toISOString()\r\n            };\r\n\r\n            const projectRef = doc(db, `organizations/${orgId}/projects/${projectId}`);\r\n            await updateDoc(projectRef, {\r\n                history: arrayUnion(historyEntry)\r\n            });\r\n        } catch (error) {\r\n            console.error('Error adding to history:', error);\r\n        }\r\n    };\r\n\r\n    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏\r\n    const handleUpdateNote = async () => {\r\n        if (!formData.title.trim()) {\r\n            alert(t('notes.pleaseEnterTitle'));\r\n            return;\r\n        }\r\n\r\n        setSaving(true);\r\n        try {\r\n            // –ù–∞–π—Ç–∏ –≤—ã–±—Ä–∞–Ω–Ω—É—é –ª–æ–∫–∞—Ü–∏—é\r\n            const selectedLocation = formData.locationId \r\n                ? project.locations?.find(loc => loc.id === formData.locationId)\r\n                : null;\r\n\r\n            const updatedNote = {\r\n                ...originalNote,\r\n                title: formData.title,\r\n                description: formData.description || '',\r\n                location: selectedLocation ? {\r\n                    id: selectedLocation.id,\r\n                    name: selectedLocation.name,\r\n                    latitude: selectedLocation.latitude || 0,\r\n                    longitude: selectedLocation.longitude || 0\r\n                } : null,\r\n                attachments: attachedFiles || [],\r\n                geologicalLog: geologicalLog || null,\r\n                updatedAt: new Date().toISOString(),\r\n                updatedBy: auth.currentUser?.uid || ''\r\n            };\r\n\r\n            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –∑–∞–º–µ—Ç–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é\r\n            const projectRef = doc(db, `organizations/${orgId}/projects/${projectId}`);\r\n            await updateDoc(projectRef, {\r\n                notes: arrayRemove(originalNote)\r\n            });\r\n            \r\n            await updateDoc(projectRef, {\r\n                notes: arrayUnion(updatedNote)\r\n            });\r\n\r\n            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é\r\n            await addToHistory('note_updated', {\r\n                noteTitle: formData.title,\r\n                noteId: noteId\r\n            });\r\n\r\n            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞\r\n            router.push(`/pages/projects/${projectId}/notes/${noteId}`);\r\n        } catch (error) {\r\n            console.error('Error updating note:', error);\r\n            alert(t('notes.errorUpdatingNote'));\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    if (loading || !originalNote || !project) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-screen\">\r\n                <div className=\"text-xl\">{t('loading')}...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6\">\r\n            {/* Header */}\r\n            <div className=\"max-w-4xl mx-auto\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                    <div>\r\n                        <button\r\n                            onClick={() => router.push(`/pages/projects/${projectId}/notes/${noteId}`)}\r\n                            className=\"text-blue-600 hover:text-blue-800 flex items-center gap-2 mb-2\"\r\n                        >\r\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 17l-5-5m0 0l5-5m-5 5h12\" />\r\n                            </svg>\r\n                            {t('cancel')}\r\n                        </button>\r\n                        <h1 className=\"text-3xl font-bold\">{t('notes.editNote')}</h1>\r\n                        <p className=\"text-gray-600 mt-1\">{t('notes.project')}: {project.title}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Form */}\r\n                <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n                    <div className=\"space-y-6\">\r\n                        {/* Note Title */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                {t('notes.noteTitle')} <span className=\"text-red-500\">*</span>\r\n                            </label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={formData.title}\r\n                                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n                                placeholder={t('notes.enterTitle')}\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Note Description */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                {t('projects.description')}\r\n                            </label>\r\n                            <textarea\r\n                                value={formData.description}\r\n                                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                                placeholder={t('notes.enterDescription')}\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                rows=\"6\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Location Selection */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                {t('notes.linkToLocation')}\r\n                            </label>\r\n                            <select\r\n                                value={formData.locationId}\r\n                                onChange={(e) => setFormData(prev => ({ ...prev, locationId: e.target.value }))}\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                            >\r\n                                <option value=\"\">{t('notes.noLocation')}</option>\r\n                                {project.locations && project.locations.map((location) => (\r\n                                    <option key={location.id} value={location.id}>\r\n                                        {location.name}\r\n                                        {location.latitude && location.longitude && \r\n                                            ` (${location.latitude}, ${location.longitude})`\r\n                                        }\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                            {(!project.locations || project.locations.length === 0) && (\r\n                                <p className=\"text-xs text-gray-500 mt-1\">\r\n                                    {t('notes.addLocationFirst')}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Geological Log Tool */}\r\n                        <div>\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <label className=\"block text-sm font-medium text-gray-700\">\r\n                                    üó∫Ô∏è {t('notes.geologicalLog')}\r\n                                </label>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowLogTool(!showLogTool)}\r\n                                    className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium\"\r\n                                >\r\n                                    {showLogTool ? `‚ûñ ${t('notes.hideEditor')}` : `‚ûï ${t('notes.openEditor')}`}\r\n                                </button>\r\n                            </div>\r\n                            \r\n                            {showLogTool && (\r\n                                <div className=\"mt-4\">\r\n                                    <GeologicalLogTool\r\n                                        onSave={(logData) => {\r\n                                            setGeologicalLog(logData);\r\n                                            alert(t('notes.logSaved'));\r\n                                        }}\r\n                                        initialData={geologicalLog}\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                            \r\n                            {geologicalLog && !showLogTool && (\r\n                                <div className=\"mt-2 p-4 bg-purple-50 border-2 border-purple-200 rounded-lg\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <div>\r\n                                            <p className=\"text-sm font-medium text-purple-900\">\r\n                                                ‚úÖ {t('notes.logCreated')}\r\n                                            </p>\r\n                                            <p className=\"text-xs text-purple-700 mt-1\">\r\n                                                {t('notes.wellName')}: {geologicalLog.wellName || t('notes.notSpecifiedWell')} | \r\n                                                {' '}{t('notes.layersCount')}: {geologicalLog.layers?.length || 0}\r\n                                            </p>\r\n                                        </div>\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() => setShowLogTool(true)}\r\n                                            className=\"text-purple-600 hover:text-purple-800 text-sm font-medium\"\r\n                                        >\r\n                                            {t('notes.editLog')}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* File Upload Section */}\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                                üìé {t('notes.attachFiles')}\r\n                            </label>\r\n                            \r\n                            {/* File Drop Zone */}\r\n                            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    multiple\r\n                                    id=\"file-upload\"\r\n                                    className=\"hidden\"\r\n                                    onChange={(e) => handleFileSelect(e.target.files)}\r\n                                    accept=\"image/*,application/pdf,.doc,.docx,.txt,.csv,.kml,.gpx\"\r\n                                />\r\n                                \r\n                                <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\r\n                                    <div className=\"space-y-3\">\r\n                                        <svg className=\"w-12 h-12 mx-auto text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\r\n                                        </svg>\r\n                                        <div>\r\n                                            <p className=\"text-base text-gray-600 font-medium\">\r\n                                                {uploadingFiles ? t('notes.uploadingFiles') : t('notes.fileDropZone')}\r\n                                            </p>\r\n                                            <p className=\"text-sm text-gray-500 mt-1\">\r\n                                                {t('notes.fileDropHint')}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </label>\r\n                            </div>\r\n\r\n                            {/* Attached Files List */}\r\n                            {attachedFiles.length > 0 && (\r\n                                <div className=\"mt-4 space-y-3\">\r\n                                    <p className=\"text-sm font-medium text-gray-700\">\r\n                                        {t('notes.attachedFiles')} ({attachedFiles.length}):\r\n                                    </p>\r\n                                    {attachedFiles.map((file, index) => (\r\n                                        <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n                                            <div className=\"flex items-center space-x-3\">\r\n                                                <span className=\"text-2xl\">\r\n                                                    {getFileIcon(file)}\r\n                                                </span>\r\n                                                <div>\r\n                                                    <p className=\"text-sm font-medium text-gray-800\">\r\n                                                        {file.name}\r\n                                                    </p>\r\n                                                    <p className=\"text-xs text-gray-500\">\r\n                                                        {(file.size / 1024 / 1024).toFixed(2)} {t('notes.mb')}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => removeFile(index)}\r\n                                                className=\"text-red-500 hover:text-red-700 p-2\"\r\n                                            >\r\n                                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                                </svg>\r\n                                            </button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Action Buttons */}\r\n                    <div className=\"flex gap-4 mt-8 pt-6 border-t\">\r\n                        <button\r\n                            onClick={handleUpdateNote}\r\n                            disabled={!formData.title.trim() || saving}\r\n                            className=\"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors\"\r\n                        >\r\n                            {saving ? t('notes.saving') : t('save')}\r\n                        </button>\r\n                        <button\r\n                            onClick={() => router.push(`/pages/projects/${projectId}/notes/${noteId}`)}\r\n                            disabled={saving}\r\n                            className=\"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 font-medium transition-colors\"\r\n                        >\r\n                            {t('cancel')}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EditNotePage;\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}
module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},84496,80858,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(10682);function e(){let a=(0,c.useRouter)(),{t:e}=(0,d.useStrings)();return(0,b.jsxs)("div",{className:"sticky top-2 w-56 h-screen bg-green-800 text-white flex flex-col justify-between rounded-lg shadow-lg m-2 shrink-0 z-10",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"p-4 text-2xl font-semibold",children:"Geo-Note"}),(0,b.jsxs)("div",{className:"flex flex-col space-y-4 mt-4 px-4",children:[(0,b.jsx)("button",{onClick:b=>{b.preventDefault(),console.log("Projects button clicked"),a.push("/pages/projects")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:e("nav.projects")}),(0,b.jsx)("button",{onClick:b=>{b.preventDefault(),console.log("News button clicked"),a.push("/pages/news")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:e("nav.news")}),(0,b.jsx)("button",{onClick:b=>{b.preventDefault(),console.log("Meetings button clicked"),a.push("/pages/meetings")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:e("nav.meetings")}),(0,b.jsx)("button",{onClick:b=>{b.preventDefault(),console.log("Notes button clicked"),a.push("/pages/notes")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:e("nav.notes")})]})]}),(0,b.jsxs)("div",{className:"p-4 text-xs text-gray-200",children:[(0,b.jsx)("div",{className:"flex flex-col space-y-4 mt-4 px-4 mb-4",children:(0,b.jsx)("button",{onClick:b=>{b.preventDefault(),console.log("Tickets button clicked"),a.push("/pages/tickets")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:e("nav.tickets")})}),(0,b.jsx)("p",{children:"Made by abdu1axad and dantajd"}),(0,b.jsx)("p",{children:"Copyright 2025"})]})]})}a.s(["default",()=>e],84496);var f=a.i(72131);function g(){let{t:a,language:e}=(0,d.useStrings)(),[g,h]=(0,f.useState)(a("navbar.determining")),[i,j]=(0,f.useState)(!1),k=(0,c.useRouter)();(0,f.useEffect)(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(a=>{let{latitude:b,longitude:c}=a.coords;h(`${b.toFixed(5)}, ${c.toFixed(5)}`)},b=>{console.error(b),h(a("navbar.geolocationError"))}):h(a("navbar.geolocationUnavailable"))},[a]);let l=a=>{(0,d.changeLanguage)(a),j(!1)};return(0,b.jsxs)("div",{className:"flex items-center justify-between bg-green-900 text-white p-6 rounded-xl shadow-md m-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"location_on"}),(0,b.jsx)("span",{className:"text-sm",children:g})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-lg cursor-pointer hover:text-green-300 transition",onClick:()=>k.push("/pages/homeScreen"),children:"home"}),(0,b.jsx)("span",{className:"material-symbols-outlined text-lg cursor-pointer hover:text-green-300 transition",onClick:()=>k.push("/pages/settings"),children:"settings"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>j(!i),className:"flex items-center space-x-1 cursor-pointer hover:text-green-300 transition text-sm font-medium",children:[(0,b.jsx)("span",{children:(()=>{switch(e){case"ru":return"RU";case"en":default:return"EN";case"uz":return"UZ"}})()}),(0,b.jsx)("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),i&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg z-20 overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>l("ru"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"ru"===e?"bg-green-50":""}`,children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"Русский"}),"ru"===e&&(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}),(0,b.jsxs)("button",{onClick:()=>l("en"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"en"===e?"bg-green-50":""}`,children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"English"}),"en"===e&&(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}),(0,b.jsxs)("button",{onClick:()=>l("uz"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"uz"===e?"bg-green-50":""}`,children:[(0,b.jsx)("span",{className:"text-gray-800 font-medium",children:"O'zbekcha"}),"uz"===e&&(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})]})]})]})]})]})}a.s(["default",()=>g],80858)},26069,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(30485);var e=a.i(31052),f=a.i(76650);a.i(69387);var g=a.i(60574),h=a.i(84496),i=a.i(80858),j=a.i(10682);let k=({news:a,onNewsUpdate:e,currentUserId:h,isAdmin:i})=>{(0,d.useRouter)();let{t:k}=(0,j.useStrings)(),[l,m]=(0,c.useState)(!1),n=async()=>{if(!(!h||a.readBy?.includes(h))){m(!0);try{let b=a.readBy||[];b.push(h),await (0,g.updateDoc)((0,g.doc)(f.db,`organizations/${a.orgId}/news/${a.id}`),{readBy:b,lastReadAt:new Date().toISOString()}),e&&e()}catch(a){console.error("Error marking news as read:",a)}finally{m(!1)}}},o=async()=>{if(i&&confirm(k("news.confirmArchive"))){m(!0);try{await (0,g.updateDoc)((0,g.doc)(f.db,`organizations/${a.orgId}/news/${a.id}`),{archived:!0,archivedAt:new Date().toISOString(),archivedBy:h}),e&&e()}catch(a){console.error("Error archiving news:",a)}finally{m(!1)}}},p=a.readBy?.includes(h);return(0,b.jsx)("div",{className:`rounded-lg border-2 mb-4 ${(a=>{switch(a?.toLowerCase()){case"high":return"border-red-400 bg-red-50";case"medium":return"border-yellow-400 bg-yellow-50";case"low":return"border-green-400 bg-green-50";default:return"border-gray-300 bg-white"}})(a.priority)} ${!p?"shadow-md":""}`,children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsxs)("h3",{className:`text-xl font-semibold ${!p?"text-gray-900":"text-gray-600"}`,children:[a.title,!p&&(0,b.jsx)("span",{className:"ml-2 w-2 h-2 bg-blue-500 rounded-full inline-block"})]}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${(a=>{switch(a?.toLowerCase()){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(a.priority)}`,children:a.priority||"normal"})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:[(a=>{if(!a)return"";try{return new Date(a).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(b){return a}})(a.createdAt)," • ",a.authorName||k("news.authorUnknown")]}),(0,b.jsx)("p",{className:`${!p?"text-gray-900":"text-gray-600"} mb-4`,children:a.content}),a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:a.tags.map((a,c)=>(0,b.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:["#",a]},c))})]})}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[!p&&(0,b.jsx)("button",{onClick:n,disabled:l,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:l?k("news.marking"):k("news.markAsRead")}),p&&(0,b.jsxs)("div",{className:"flex items-center text-green-600 text-sm",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),k("news.readStatus")]}),i&&!a.archived&&(0,b.jsx)("button",{onClick:o,disabled:l,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-red-600 transition-colors",children:k("news.archiveButton")})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[k("news.readBy"),": ",a.readBy?.length||0," ",k("news.people")]}),a.archived&&(0,b.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:k("news.archivedStatus")})]})]})]})})};function l(){let a=(0,e.getAuth)(f.app),l=(0,d.useRouter)(),{t:m}=(0,j.useStrings)(),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)({title:"",content:"",priority:"medium",tags:""}),D=async a=>{try{for(let b of(await (0,g.getDocs)((0,g.collection)(f.db,"organizations"))).docs){let c=await (0,g.getDoc)((0,g.doc)(f.db,`organizations/${b.id}/users/${a}`));if(c.exists()){let a=c.data();return w("admin"===a.role),b.id}}return null}catch(a){return console.error("Error fetching user organization:",a),null}},E=async(a,b)=>{try{let b=(await (0,g.getDocs)((0,g.collection)(f.db,`organizations/${a}/news`))).docs.map(b=>{let c=b.data();return{id:b.id,...c,orgId:a}}).sort((a,b)=>new Date(b.createdAt||0)-new Date(a.createdAt||0));o(b)}catch(a){console.error("Error fetching news:",a)}finally{q(!1)}},F=()=>{r&&t&&E(r,t.uid)},G=async a=>{if(a.preventDefault(),B.title.trim()&&B.content.trim())try{let a=B.tags.split(",").map(a=>a.trim()).filter(a=>a);await (0,g.addDoc)((0,g.collection)(f.db,`organizations/${r}/news`),{title:B.title,content:B.content,priority:B.priority,tags:a,createdAt:new Date().toISOString(),authorId:t.uid,authorName:t.displayName||t.email,readBy:[],archived:!1}),C({title:"",content:"",priority:"medium",tags:""}),A(!1),F()}catch(a){console.error("Error creating news:",a),alert(m("news.errorCreating"))}},H=n.filter(a=>"all"===x?!a.archived:"unread"===x?!a.archived&&!a.readBy?.includes(t?.uid):"read"===x?!a.archived&&a.readBy?.includes(t?.uid):"archived"!==x||a.archived),I={total:n.filter(a=>!a.archived).length,unread:n.filter(a=>!a.archived&&!a.readBy?.includes(t?.uid)).length,read:n.filter(a=>!a.archived&&a.readBy?.includes(t?.uid)).length,archived:n.filter(a=>a.archived).length};return((0,c.useEffect)(()=>{let b=(0,e.onAuthStateChanged)(a,async a=>{if(a){u(a);let b=await D(a.uid);b?(s(b),await E(b,a.uid)):(console.error("User is not assigned to any organization"),q(!1))}else l.push("/auth/login")});return()=>b()},[]),p)?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:(0,b.jsx)("div",{className:"text-xl text-gray-700",children:m("loading")})}):(0,b.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,b.jsx)(h.default,{orgId:r}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)(i.default,{orgId:r}),(0,b.jsxs)("div",{className:"flex-1 p-8 overflow-auto",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:m("news.organizationNews")}),v&&(0,b.jsx)("button",{onClick:()=>A(!z),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:z?m("news.cancelButton"):m("news.addNewsButton")})]}),z&&v&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-6 mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:m("news.createNews")}),(0,b.jsxs)("form",{onSubmit:G,children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("input",{type:"text",placeholder:m("news.newsHeadline"),value:B.title,onChange:a=>C({...B,title:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("textarea",{placeholder:m("news.newsContent"),value:B.content,onChange:a=>C({...B,content:a.target.value}),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})}),(0,b.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,b.jsxs)("select",{value:B.priority,onChange:a=>C({...B,priority:a.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"low",children:m("news.lowPriority")}),(0,b.jsx)("option",{value:"medium",children:m("news.mediumPriority")}),(0,b.jsx)("option",{value:"high",children:m("news.highPriority")})]}),(0,b.jsx)("input",{type:"text",placeholder:m("news.tagsPlaceholder"),value:B.tags,onChange:a=>C({...B,tags:a.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:m("news.createButton")}),(0,b.jsx)("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:m("news.cancelFormButton")})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:I.total}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:m("news.totalNews")})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:I.unread}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:m("news.unread")})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:I.read}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:m("news.read")})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:I.archived}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:m("news.archived")})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsxs)("button",{onClick:()=>y("all"),className:`px-4 py-2 text-sm font-medium rounded-md ${"all"===x?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[m("news.all")," (",I.total,")"]}),(0,b.jsxs)("button",{onClick:()=>y("unread"),className:`px-4 py-2 text-sm font-medium rounded-md ${"unread"===x?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[m("news.unreadFilter")," (",I.unread,")"]}),(0,b.jsxs)("button",{onClick:()=>y("read"),className:`px-4 py-2 text-sm font-medium rounded-md ${"read"===x?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[m("news.readFilter")," (",I.read,")"]}),v&&(0,b.jsxs)("button",{onClick:()=>y("archived"),className:`px-4 py-2 text-sm font-medium rounded-md ${"archived"===x?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[m("news.archive")," (",I.archived,")"]})]})]}),0===H.length?(0,b.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,b.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),(0,b.jsx)("p",{className:"text-xl font-semibold mb-2",children:m("news.noNewsMessage")}),(0,b.jsx)("p",{children:"all"===x?m("news.noNewsDescription"):"unread"===x?m("news.noUnreadNews"):"read"===x?m("news.noReadNews"):m("news.noArchivedNews")})]}):(0,b.jsx)("div",{className:"max-w-4xl",children:H.map(a=>(0,b.jsx)(k,{news:a,onNewsUpdate:F,currentUserId:t?.uid,isAdmin:v},a.id))})]})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1aee70c1._.js.map
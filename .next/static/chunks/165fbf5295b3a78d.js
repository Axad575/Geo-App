(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77690,78698,e=>{"use strict";var t=e.i(43476),s=e.i(18566),r=e.i(35428);function a(){let e=(0,s.useRouter)(),{t:a}=(0,r.useStrings)();return(0,t.jsxs)("div",{className:"sticky top-2 w-56 h-screen bg-green-800 text-white flex flex-col justify-between rounded-lg shadow-lg m-2 shrink-0 z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"p-4 text-2xl font-semibold",children:"Geo-Note"}),(0,t.jsxs)("div",{className:"flex flex-col space-y-4 mt-4 px-4",children:[(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Projects button clicked"),e.push("/pages/projects")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:a("nav.projects")}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("News button clicked"),e.push("/pages/news")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:a("nav.news")}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Meetings button clicked"),e.push("/pages/meetings")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:a("nav.meetings")}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Notes button clicked"),e.push("/pages/notes")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:a("nav.notes")})]})]}),(0,t.jsxs)("div",{className:"p-4 text-xs text-gray-200",children:[(0,t.jsx)("div",{className:"flex flex-col space-y-4 mt-4 px-4 mb-4",children:(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Tickets button clicked"),e.push("/pages/tickets")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:a("nav.tickets")})}),(0,t.jsx)("p",{children:"Made by abdu1axad and dantajd"}),(0,t.jsx)("p",{children:"Copyright 2025"})]})]})}e.s(["default",()=>a],77690);var l=e.i(71645);function n(){let{t:e,language:a}=(0,r.useStrings)(),[n,i]=(0,l.useState)(e("navbar.determining")),[o,c]=(0,l.useState)(!1),d=(0,s.useRouter)();(0,l.useEffect)(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:s}=e.coords;i(`${t.toFixed(5)}, ${s.toFixed(5)}`)},t=>{console.error(t),i(e("navbar.geolocationError"))}):i(e("navbar.geolocationUnavailable"))},[e]);let u=e=>{(0,r.changeLanguage)(e),c(!1)};return(0,t.jsxs)("div",{className:"flex items-center justify-between bg-green-900 text-white p-6 rounded-xl shadow-md m-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-lg",children:"location_on"}),(0,t.jsx)("span",{className:"text-sm",children:n})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-lg cursor-pointer hover:text-green-300 transition",onClick:()=>d.push("/pages/homeScreen"),children:"home"}),(0,t.jsx)("span",{className:"material-symbols-outlined text-lg cursor-pointer hover:text-green-300 transition",onClick:()=>d.push("/pages/settings"),children:"settings"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>c(!o),className:"flex items-center space-x-1 cursor-pointer hover:text-green-300 transition text-sm font-medium",children:[(0,t.jsx)("span",{children:(()=>{switch(a){case"ru":return"RU";case"en":default:return"EN";case"uz":return"UZ"}})()}),(0,t.jsx)("svg",{className:`w-4 h-4 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg z-20 overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>u("ru"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"ru"===a?"bg-green-50":""}`,children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Ð ÑƒÑÑÐºÐ¸Ð¹"}),"ru"===a&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}),(0,t.jsxs)("button",{onClick:()=>u("en"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"en"===a?"bg-green-50":""}`,children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"English"}),"en"===a&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}),(0,t.jsxs)("button",{onClick:()=>u("uz"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"uz"===a?"bg-green-50":""}`,children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"O'zbekcha"}),"uz"===a&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})]})]})]})]})]})}e.s(["default",()=>n],78698)},67493,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(35428);e.s(["default",0,({users:e=[],selectedParticipants:a=[],onParticipantsChange:l,excludeUserIds:n=[],maxHeight:i="200px",placeholder:o="",label:c="",showSelectedCount:d=!0,allowMultiple:u=!0,className:x=""})=>{let{t:m}=(0,r.useStrings)(),[g,h]=(0,s.useState)(""),[p,b]=(0,s.useState)(!1),j=o||m("participantSelector.searchPlaceholder"),f=c||m("participantSelector.participants"),v=(0,s.useMemo)(()=>e.filter(e=>!n.includes(e.id)).filter(e=>{if(!g.trim())return!0;let t=g.toLowerCase(),s=(e.name||"").toLowerCase(),r=(e.email||"").toLowerCase(),a=(e.role||"").toLowerCase();return s.includes(t)||r.includes(t)||a.includes(t)}).sort((e,t)=>{let s=a.includes(e.id),r=a.includes(t.id);if(s&&!r)return -1;if(!s&&r)return 1;let l=e.name||e.email||"",n=t.name||t.email||"";return l.localeCompare(n)}),[e,g,n,a]),y=e.filter(e=>a.includes(e.id));return(0,t.jsxs)("div",{className:`space-y-3 ${x}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[f,d&&a.length>0&&(0,t.jsxs)("span",{className:"ml-2 text-blue-600 font-normal",children:["(",a.length," ",m("participantSelector.selected"),")"]})]}),a.length>0&&(0,t.jsx)("button",{type:"button",onClick:()=>{l([])},className:"text-sm text-red-600 hover:text-red-800",children:m("participantSelector.clearAll")})]}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),onFocus:()=>b(!0),placeholder:j,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),g&&(0,t.jsx)("button",{type:"button",onClick:()=>{h("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),y.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(e=>(0,t.jsxs)("div",{className:"flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[(0,t.jsxs)("span",{className:"mr-2",children:[e.name||e.email,e.role&&(0,t.jsxs)("span",{className:"text-xs text-blue-600 ml-1",children:["(",e.role,")"]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void l(a.filter(e=>e!==t))},className:"text-blue-600 hover:text-blue-800",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},e.id))}),(p||g)&&(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 bg-white border border-gray-300 rounded-lg shadow-lg z-10",style:{maxHeight:i},children:[(0,t.jsx)("div",{className:"overflow-y-auto p-2",style:{maxHeight:i},children:0===v.length?(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:m(g?"participantSelector.noParticipantsFound":"participantSelector.noAvailableParticipants")}):(0,t.jsx)("div",{className:"space-y-1",children:v.map(e=>{let s=a.includes(e.id);return(0,t.jsxs)("div",{onClick:()=>(e=>{if(!u){l([e]),b(!1);return}l(a.includes(e)?a.filter(t=>t!==e):[...a,e])})(e.id),className:`flex items-center p-2 rounded-md cursor-pointer transition-colors ${s?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:[(0,t.jsx)("input",{type:u?"checkbox":"radio",checked:s,onChange:()=>{},className:"mr-3 h-4 w-4 text-blue-600 rounded border-gray-300"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name||e.email||e.id}),e.email&&e.name&&(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),e.role&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:e.role})]})}),s&&(0,t.jsx)("svg",{className:"ml-2 h-4 w-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]},e.id)})})}),(0,t.jsx)("div",{className:"border-t border-gray-200 p-2",children:(0,t.jsx)("button",{type:"button",onClick:()=>b(!1),className:"w-full text-sm text-gray-600 hover:text-gray-800 py-1",children:m("participantSelector.collapse")})})]})}),g&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[m("participantSelector.found"),": ",v.length," ",m("participantSelector.of")," ",e.filter(e=>!n.includes(e.id)).length]}),(p||g)&&(0,t.jsx)("div",{className:"fixed inset-0 z-0",onClick:()=>{b(!1),h("")}})]})}])},61032,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);e.i(51718);var a=e.i(18357),l=e.i(86632);e.i(36180);var n=e.i(98925),i=e.i(77690),o=e.i(78698),c=e.i(67493),d=e.i(35428);let u=(e,t)=>{if(!e)return t("tasks.notSpecified");try{let s=new Date(e);if(isNaN(s.getTime()))return t("tasks.invalidDate");let r=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),l=s.getFullYear();return`${r}/${a}/${l}`}catch(e){return console.error("Error formatting date:",e),t("tasks.dateError")}},x=({task:e,users:r,onTaskUpdate:a,isSelected:l,onSelect:n})=>{let{t:i}=(0,d.useStrings)(),[o,c]=(0,s.useState)(!1),x=e.dueDate&&"completed"!==e.status&&new Date(e.dueDate)<new Date,m=async t=>{await a(e.id,{status:t})};return(0,t.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border-l-4 p-4 hover:shadow-md transition-all cursor-pointer ${(e=>{switch(e?.toLowerCase()){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-green-500 bg-green-50";case"critical":return"border-l-purple-500 bg-purple-50";default:return"border-l-gray-500 bg-gray-50"}})(e.priority)} ${l?"ring-2 ring-blue-400":""} ${x?"border-red-300":""}`,onClick:()=>n(e),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description})]}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),c(!o)},className:"text-gray-400 hover:text-gray-600",children:o?"âˆ’":"+"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e?.toLowerCase()){case"completed":return"bg-green-100 text-green-800";case"in progress":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:(e=>{switch(e?.toLowerCase()){case"completed":return i("tasks.completed");case"in progress":return i("tasks.inProgress");case"not started":return i("tasks.notStarted");default:return e}})(e.status)}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:(e=>{switch(e?.toLowerCase()){case"low":return i("tasks.low");case"medium":default:return i("tasks.medium");case"high":return i("tasks.high");case"critical":return i("tasks.critical")}})(e.priority)})]}),e.assignee&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium",children:(r[e.assignee]||e.assignee).charAt(0).toUpperCase()}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:(r[e.assignee]||e.assignee).split(" ")[0]})]})]}),e.dueDate&&(0,t.jsxs)("div",{className:`mt-2 text-xs ${x?"text-red-600 font-medium":"text-gray-500"}`,children:["ðŸ“… ",u(e.dueDate,i),x&&` (${i("tasks.overdue")})`]}),o&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",onClick:e=>e.stopPropagation(),children:[e.description&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700",children:i("tasks.description")}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),e.assignee&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700",children:i("tasks.executor")}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:(r[e.assignee]||e.assignee).charAt(0).toUpperCase()}),(0,t.jsx)("span",{className:"text-sm text-gray-900",children:r[e.assignee]||e.assignee})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:"completed"!==e.status&&(0,t.jsxs)(t.Fragment,{children:["in progress"!==e.status&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),m("in progress")},className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:i("tasks.startTask")}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),m("completed")},className:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:i("tasks.finishTask")})]})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[e.createdAt&&(0,t.jsxs)("div",{children:[i("tasks.created"),": ",u(e.createdAt,i)]}),e.updatedAt&&(0,t.jsxs)("div",{children:[i("tasks.updated"),": ",u(e.updatedAt,i)]})]})]})]})},m=({tasks:e,users:s,onTaskUpdate:r,selectedTask:a,onTaskSelect:l,currentFilter:n,sortBy:i})=>{let o,c,u,m,g,{t:h}=(0,d.useStrings)(),p=(o=[...e],"all"!==n&&(o=o.filter(e=>e.status===n)),o.sort((e,t)=>{switch(i){case"dueDate":if(!e.dueDate&&!t.dueDate)return 0;if(!e.dueDate)return 1;if(!t.dueDate)return -1;return new Date(e.dueDate)-new Date(t.dueDate);case"priority":let s={critical:4,high:3,medium:2,low:1};return(s[t.priority]||2)-(s[e.priority]||2);case"createdAt":return new Date(t.createdAt||0)-new Date(e.createdAt||0);default:return 0}}),o),b=(c={},(m=new Date(u=new Date)).setDate(m.getDate()+1),(g=new Date(u)).setDate(g.getDate()-1),p.forEach(e=>{let t;if(!e.dueDate){c[h("tasks.noDeadline")]||(c[h("tasks.noDeadline")]=[]),c[h("tasks.noDeadline")].push(e);return}let s=new Date(e.dueDate);if(s.toDateString()===u.toDateString())t=h("tasks.today");else if(s.toDateString()===m.toDateString())t=h("tasks.tomorrow");else if(s.toDateString()===g.toDateString())t=h("tasks.yesterday");else if(s<u)t=h("tasks.overdueTasks");else{let e={ru:"ru-RU",en:"en-US",uz:"uz-UZ"}[localStorage.getItem("language")||"ru"]||"ru-RU";t=s.toLocaleDateString(e,{day:"2-digit",month:"long",year:s.getFullYear()!==u.getFullYear()?"numeric":void 0})}c[t]||(c[t]=[]),c[t].push(e)}),c);return 0===p.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:h("tasks.noTasksFound")}),(0,t.jsx)("p",{className:"text-sm",children:h("tasks.createNewTask")})]}):(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(b).map(([e,n])=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:`sticky top-0 z-10 px-4 py-2 rounded-lg border-l-4 font-medium ${e===h("tasks.overdueTasks")?"text-red-600 border-red-200 bg-red-50":e===h("tasks.today")?"text-blue-600 border-blue-200 bg-blue-50":e===h("tasks.tomorrow")?"text-green-600 border-green-200 bg-green-50":"text-gray-600 border-gray-200 bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold",children:e}),(0,t.jsx)("span",{className:"text-xs bg-white px-2 py-1 rounded-full",children:n.length})]})}),(0,t.jsx)("div",{className:"absolute left-6 top-10 bottom-0 w-0.5 bg-gray-200"}),(0,t.jsx)("div",{className:"ml-12 mt-4 space-y-4",children:n.map(e=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:`absolute -left-8 top-4 w-3 h-3 rounded-full border-2 bg-white ${"completed"===e.status?"border-green-500":"in progress"===e.status?"border-blue-500":"border-gray-300"}`}),(0,t.jsx)(x,{task:e,users:s,onTaskUpdate:r,isSelected:a?.id===e.id,onSelect:l})]},e.id))})]},e))})},g=({currentFilter:e,onFilterChange:s,sortBy:r,onSortChange:a,taskStats:l})=>{let{t:n}=(0,d.useStrings)();return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900",children:n("tasks.filtersAndSort")}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full",children:[n("tasks.total"),": ",l.total]}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:[n("tasks.inProgressCount"),": ",l.inProgress]}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full",children:[n("tasks.completedCount"),": ",l.completed]}),l.overdue>0&&(0,t.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full",children:[n("tasks.overdueCount"),": ",l.overdue]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:[n("tasks.status"),":"]}),(0,t.jsxs)("select",{value:e,onChange:e=>s(e.target.value),className:"text-sm border border-gray-300 rounded px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:n("tasks.allTasks")}),(0,t.jsx)("option",{value:"not started",children:n("tasks.notStartedTasks")}),(0,t.jsx)("option",{value:"in progress",children:n("tasks.inProgressTasks")}),(0,t.jsx)("option",{value:"completed",children:n("tasks.completedTasks")})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:[n("tasks.sorting"),":"]}),(0,t.jsxs)("select",{value:r,onChange:e=>a(e.target.value),className:"text-sm border border-gray-300 rounded px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"dueDate",children:n("tasks.byDueDate")}),(0,t.jsx)("option",{value:"priority",children:n("tasks.byPriority")}),(0,t.jsx)("option",{value:"createdAt",children:n("tasks.byCreatedDate")})]})]})]})]})},h=({isOpen:e,onClose:r,onAdd:a,users:l,project:n})=>{let{t:i}=(0,d.useStrings)(),[o,u]=(0,s.useState)({title:"",description:"",assignee:"",priority:"medium",startDate:"",dueDate:"",status:"not started",locationId:""}),[x,m]=(0,s.useState)(!1),g=Object.entries(l).map(([e,t])=>({id:e,name:t||e,email:e,role:"member"})).filter(e=>n?.participants?.includes(e.id)),h=async e=>{if(e.preventDefault(),o.title.trim()){m(!0);try{await a(o),u({title:"",description:"",assignee:"",priority:"medium",startDate:"",dueDate:"",status:"not started",locationId:""}),r()}catch(e){console.error("Error creating task:",e)}finally{m(!1)}}},p=()=>{u({title:"",description:"",assignee:"",priority:"medium",startDate:"",dueDate:"",status:"not started",locationId:""}),r()};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:i("tasks.createTask")}),(0,t.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.taskTitleRequired")}),(0,t.jsx)("input",{type:"text",value:o.title,onChange:e=>u(t=>({...t,title:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:i("tasks.enterTaskTitle"),required:!0,disabled:x})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.taskDescription")}),(0,t.jsx)("textarea",{value:o.description,onChange:e=>u(t=>({...t,description:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:i("tasks.taskDescriptionPlaceholder"),disabled:x})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.default,{users:g,selectedParticipants:o.assignee?[o.assignee]:[],onParticipantsChange:e=>{u(t=>({...t,assignee:e.length>0?e[0]:""}))},allowMultiple:!1,label:i("tasks.selectAssignee"),placeholder:i("tasks.searchAssignee"),maxHeight:"150px",showSelectedCount:!1,className:"w-full"}),0===g.length&&(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:i("tasks.noParticipants")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.priority")}),(0,t.jsxs)("select",{value:o.priority,onChange:e=>u(t=>({...t,priority:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:[(0,t.jsx)("option",{value:"low",children:i("tasks.lowPriority")}),(0,t.jsx)("option",{value:"medium",children:i("tasks.mediumPriority")}),(0,t.jsx)("option",{value:"high",children:i("tasks.highPriority")}),(0,t.jsx)("option",{value:"critical",children:i("tasks.criticalPriority")})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.startDate")}),(0,t.jsx)("input",{type:"date",value:o.startDate,onChange:e=>u(t=>({...t,startDate:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.dueDate")}),(0,t.jsx)("input",{type:"date",value:o.dueDate,onChange:e=>u(t=>({...t,dueDate:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.taskStatus")}),(0,t.jsxs)("select",{value:o.status,onChange:e=>u(t=>({...t,status:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:[(0,t.jsx)("option",{value:"not started",children:i("tasks.notStarted")}),(0,t.jsx)("option",{value:"in progress",children:i("tasks.inProgress")}),(0,t.jsx)("option",{value:"completed",children:i("tasks.completed")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i("tasks.relatedLocation")}),(0,t.jsxs)("select",{value:o.locationId,onChange:e=>u(t=>({...t,locationId:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:[(0,t.jsx)("option",{value:"",children:i("tasks.noLocation")}),n?.locations?.map(e=>(0,t.jsxs)("option",{value:e.id,children:["ðŸ“ ",e.name]},e.id))]})]}),o.assignee&&(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:(l[o.assignee]||o.assignee).charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-blue-900",children:[i("tasks.assignedTo"),": ",l[o.assignee]||o.assignee]}),(0,t.jsx)("div",{className:"text-xs text-blue-600",children:i("tasks.taskWillBeAssigned")})]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>u(e=>({...e,assignee:""})),className:"text-blue-400 hover:text-blue-600",disabled:x,children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:!o.title.trim()||x,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i(x?"tasks.creating":"tasks.createButton")}),(0,t.jsx)("button",{type:"button",onClick:p,disabled:x,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 disabled:opacity-50 transition-colors",children:i("tasks.cancel")})]})]})]})}):null};function p(){let e=(0,a.getAuth)(l.app),c=(0,r.useRouter)(),x=(0,r.useParams)(),{t:p}=(0,d.useStrings)(),b=x.id,[j,f]=(0,s.useState)(null),[v,y]=(0,s.useState)([]),[k,N]=(0,s.useState)({}),[w,D]=(0,s.useState)(null),[C,S]=(0,s.useState)(!0),[L,$]=(0,s.useState)(!1),[P,T]=(0,s.useState)(null),[A,z]=(0,s.useState)("all"),[M,B]=(0,s.useState)("dueDate"),U=async e=>{try{for(let t of(await (0,n.getDocs)((0,n.collection)(l.db,"organizations"))).docs)if((await (0,n.getDoc)((0,n.doc)(l.db,`organizations/${t.id}/users/${e}`))).exists())return t.id;return null}catch(e){return console.error("Error fetching user organization:",e),null}},E=async e=>{try{let t=await (0,n.getDoc)((0,n.doc)(l.db,`organizations/${e}/projects/${b}`));if(t.exists()){let e={id:t.id,...t.data()};f(e),y(e.tasks||[])}else c.push("/pages/projects")}catch(e){console.error("Error fetching project:",e)}},F=async e=>{try{let t=await (0,n.getDocs)((0,n.collection)(l.db,`organizations/${e}/users`)),s={};t.docs.forEach(e=>{s[e.id]=e.data().name||e.data().email}),N(s)}catch(e){console.error("Error fetching users:",e)}},I=async t=>{try{let s={...t,id:Date.now().toString(),createdAt:new Date().toISOString(),createdBy:e.currentUser?.uid,createdByName:k[e.currentUser?.uid]||e.currentUser?.email},r=(0,n.doc)(l.db,`organizations/${w}/projects/${b}`);await (0,n.updateDoc)(r,{tasks:(0,n.arrayUnion)(s)}),y(e=>[...e,s])}catch(e){console.error("Error adding task:",e)}},W=async(e,t)=>{try{let s=v.map(s=>s.id===e?{...s,...t,updatedAt:new Date().toISOString()}:s),r=(0,n.doc)(l.db,`organizations/${w}/projects/${b}`);await (0,n.updateDoc)(r,{tasks:s}),y(s)}catch(e){console.error("Error updating task:",e)}};if((0,s.useEffect)(()=>{let t=(0,a.onAuthStateChanged)(e,async e=>{if(e){let t=await U(e.uid);t?(D(t),await E(t),await F(t)):c.push("/auth/login")}else c.push("/auth/login");S(!1)});return()=>t()},[b]),C)return(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,t.jsx)(i.default,{orgId:w}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(o.default,{orgId:w}),(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)("div",{className:"text-center",children:p("tasks.loading")})})]})]});let R={total:v.length,notStarted:v.filter(e=>"not started"===e.status).length,inProgress:v.filter(e=>"in progress"===e.status).length,completed:v.filter(e=>"completed"===e.status).length,overdue:v.filter(e=>!!e.dueDate&&"completed"!==e.status&&new Date(e.dueDate)<new Date).length};return(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,t.jsx)(i.default,{orgId:w}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)(o.default,{orgId:w}),(0,t.jsxs)("div",{className:"flex-1 p-6 overflow-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:p("tasks.timeline")}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:j?.title})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>$(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:["+ ",p("tasks.newTask")]}),(0,t.jsxs)("button",{onClick:()=>c.push(`/pages/projects/${b}`),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:["â† ",p("tasks.backToProject")]})]})]}),j&&(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:j.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:j.description})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-sm text-gray-600",children:[j.createdAt&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:p("tasks.projectCreated")}),(0,t.jsx)("span",{className:"text-sm",children:u(j.createdAt,p)})]}),j.startDate&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:p("tasks.projectStart")}),(0,t.jsx)("span",{className:"text-sm",children:u(j.startDate,p)})]}),j.endDate&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:p("tasks.projectEnd")}),(0,t.jsx)("span",{className:"text-sm",children:u(j.endDate,p)})]})]})]})}),(0,t.jsx)(g,{currentFilter:A,onFilterChange:z,sortBy:M,onSortChange:B,taskStats:R}),(0,t.jsx)("div",{className:"max-w-4xl",children:(0,t.jsx)(m,{tasks:v,users:k,onTaskUpdate:W,selectedTask:P,onTaskSelect:T,currentFilter:A,sortBy:M})})]})]}),(0,t.jsx)(h,{isOpen:L,onClose:()=>$(!1),onAdd:I,users:k,project:j})]})}e.s(["default",()=>p])}]);
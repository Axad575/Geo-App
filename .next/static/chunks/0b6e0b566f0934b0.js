(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77690,78698,e=>{"use strict";var t=e.i(43476),s=e.i(18566),r=e.i(35428);function i(){let e=(0,s.useRouter)(),{t:i}=(0,r.useStrings)();return(0,t.jsxs)("div",{className:"sticky top-2 w-56 h-screen bg-green-800 text-white flex flex-col justify-between rounded-lg shadow-lg m-2 shrink-0 z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"p-4 text-2xl font-semibold",children:"Geo-Note"}),(0,t.jsxs)("div",{className:"flex flex-col space-y-4 mt-4 px-4",children:[(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Projects button clicked"),e.push("/pages/projects")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:i("nav.projects")}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("News button clicked"),e.push("/pages/news")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:i("nav.news")}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Meetings button clicked"),e.push("/pages/meetings")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:i("nav.meetings")}),(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Notes button clicked"),e.push("/pages/notes")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:i("nav.notes")})]})]}),(0,t.jsxs)("div",{className:"p-4 text-xs text-gray-200",children:[(0,t.jsx)("div",{className:"flex flex-col space-y-4 mt-4 px-4 mb-4",children:(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Tickets button clicked"),e.push("/pages/tickets")},className:"bg-green-400 text-black py-2 rounded-md hover:bg-green-300 transition",children:i("nav.tickets")})}),(0,t.jsx)("p",{children:"Made by abdu1axad and dantajd"}),(0,t.jsx)("p",{children:"Copyright 2025"})]})]})}e.s(["default",()=>i],77690);var n=e.i(71645);function l(){let{t:e,language:i}=(0,r.useStrings)(),[l,a]=(0,n.useState)(e("navbar.determining")),[o,c]=(0,n.useState)(!1),d=(0,s.useRouter)();(0,n.useEffect)(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:s}=e.coords;a(`${t.toFixed(5)}, ${s.toFixed(5)}`)},t=>{console.error(t),a(e("navbar.geolocationError"))}):a(e("navbar.geolocationUnavailable"))},[e]);let u=e=>{(0,r.changeLanguage)(e),c(!1)};return(0,t.jsxs)("div",{className:"flex items-center justify-between bg-green-900 text-white p-6 rounded-xl shadow-md m-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-lg",children:"location_on"}),(0,t.jsx)("span",{className:"text-sm",children:l})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-lg cursor-pointer hover:text-green-300 transition",onClick:()=>d.push("/pages/homeScreen"),children:"home"}),(0,t.jsx)("span",{className:"material-symbols-outlined text-lg cursor-pointer hover:text-green-300 transition",onClick:()=>d.push("/pages/settings"),children:"settings"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>c(!o),className:"flex items-center space-x-1 cursor-pointer hover:text-green-300 transition text-sm font-medium",children:[(0,t.jsx)("span",{children:(()=>{switch(i){case"ru":return"RU";case"en":default:return"EN";case"uz":return"UZ"}})()}),(0,t.jsx)("svg",{className:`w-4 h-4 transition-transform ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg z-20 overflow-hidden",children:[(0,t.jsxs)("button",{onClick:()=>u("ru"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"ru"===i?"bg-green-50":""}`,children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"Ð ÑƒÑÑÐºÐ¸Ð¹"}),"ru"===i&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}),(0,t.jsxs)("button",{onClick:()=>u("en"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"en"===i?"bg-green-50":""}`,children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"English"}),"en"===i&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]}),(0,t.jsxs)("button",{onClick:()=>u("uz"),className:`w-full px-4 py-3 text-left hover:bg-green-50 transition-colors flex items-center space-x-2 ${"uz"===i?"bg-green-50":""}`,children:[(0,t.jsx)("span",{className:"text-gray-800 font-medium",children:"O'zbekcha"}),"uz"===i&&(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})]})]})]})]})]})}e.s(["default",()=>l],78698)},83853,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);e.i(51718);var i=e.i(18357),n=e.i(86632);e.i(36180);var l=e.i(98925),a=e.i(77690),o=e.i(78698),c=e.i(35428);function d(){let e=(0,i.getAuth)(n.app),d=(0,r.useRouter)(),{t:u,language:x}=(0,c.useStrings)(),[g,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[b,j]=(0,s.useState)(!0),[f,k]=(0,s.useState)(!1),[v,y]=(0,s.useState)([]),[N,w]=(0,s.useState)(!1),[C,S]=(0,s.useState)("my"),[L,z]=(0,s.useState)({title:"",description:"",type:"suggestion",priority:"medium"}),D=async e=>{try{for(let t of(await (0,l.getDocs)((0,l.collection)(n.db,"organizations"))).docs){let s=await (0,l.getDoc)((0,l.doc)(n.db,`organizations/${t.id}/users/${e}`));if(s.exists())return{orgId:t.id,userData:s.data()}}return null}catch(e){return console.error("Error fetching user organization:",e),null}},$=async(e,t)=>{try{let t=(0,l.collection)(n.db,`organizations/${e}/tickets`),s=(await (0,l.getDocs)((0,l.query)(t,(0,l.orderBy)("createdAt","desc")))).docs.map(e=>({id:e.id,...e.data()}));y(s)}catch(e){console.error("Error fetching tickets:",e)}};(0,s.useEffect)(()=>{let t=(0,i.onAuthStateChanged)(e,async e=>{if(e){m(e);let t=await D(e.uid);t&&(p(t.orgId),await $(t.orgId,e.uid)),j(!1)}else d.push("/auth/login")});return()=>t()},[d]);let M=async e=>{if(e.preventDefault(),!L.title.trim()||!L.description.trim())return void alert(u("tickets.fillAllFields"));k(!0);try{let e=(0,l.collection)(n.db,`organizations/${h}/tickets`);await (0,l.addDoc)(e,{...L,userId:g.uid,userEmail:g.email,userName:g.displayName||g.email,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),z({title:"",description:"",type:"suggestion",priority:"medium"}),w(!1),await $(h,g.uid),alert(u("tickets.ticketSubmitted"))}catch(e){console.error("Error submitting ticket:",e),alert(u("tickets.submitError"))}finally{k(!1)}},P=async e=>{if(confirm(u("tickets.confirmDelete")))try{await (0,l.deleteDoc)((0,l.doc)(n.db,`organizations/${h}/tickets/${e}`)),await $(h,g.uid),alert(u("tickets.ticketDeleted"))}catch(e){console.error("Error deleting ticket:",e),alert(u("tickets.deleteError"))}},T="my"===C?v.filter(e=>e.userId===g?.uid):v;return b?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,t.jsxs)("p",{className:"mt-4 text-gray-600",children:[u("loading"),"..."]})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100 flex",children:[(0,t.jsx)(a.default,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)(o.default,{}),(0,t.jsx)("main",{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:u("tickets.title")}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:u("tickets.subtitle")})]}),(0,t.jsxs)("button",{onClick:()=>w(!N),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),u("tickets.createTicket")]})]}),N&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:u("tickets.newTicket")}),(0,t.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u("tickets.ticketTitle")," ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",required:!0,value:L.title,onChange:e=>z(t=>({...t,title:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:u("tickets.enterTitle"),disabled:f})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:u("tickets.type")}),(0,t.jsxs)("select",{value:L.type,onChange:e=>z(t=>({...t,type:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f,children:[(0,t.jsx)("option",{value:"suggestion",children:u("tickets.suggestion")}),(0,t.jsx)("option",{value:"bug",children:u("tickets.bug")}),(0,t.jsx)("option",{value:"feature",children:u("tickets.feature")}),(0,t.jsx)("option",{value:"question",children:u("tickets.question")}),(0,t.jsx)("option",{value:"other",children:u("tickets.other")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:u("tickets.priority")}),(0,t.jsxs)("select",{value:L.priority,onChange:e=>z(t=>({...t,priority:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f,children:[(0,t.jsx)("option",{value:"low",children:u("tickets.lowPriority")}),(0,t.jsx)("option",{value:"medium",children:u("tickets.mediumPriority")}),(0,t.jsx)("option",{value:"high",children:u("tickets.highPriority")}),(0,t.jsx)("option",{value:"critical",children:u("tickets.criticalPriority")})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u("tickets.description")," ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{required:!0,value:L.description,onChange:e=>z(t=>({...t,description:e.target.value})),rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical",placeholder:u("tickets.enterDescription"),disabled:f})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?u("tickets.submitting"):u("tickets.submit")}),(0,t.jsx)("button",{type:"button",onClick:()=>w(!1),disabled:f,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 disabled:opacity-50 transition-colors",children:u("cancel")})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow mb-6",children:(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,t.jsxs)("button",{onClick:()=>S("my"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"my"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u("tickets.myTickets")," (",v.filter(e=>e.userId===g?.uid).length,")"]}),(0,t.jsxs)("button",{onClick:()=>S("all"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"all"===C?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u("tickets.allTickets")," (",v.length,")"]})]})})}),(0,t.jsx)("div",{className:"space-y-4",children:0===T.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u("tickets.noTickets")}),(0,t.jsx)("p",{className:"text-gray-600",children:u("tickets.noTicketsDescription")})]}):T.map(e=>{var s,r,i;let n,l,a,o,c,d;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(s=e.type,n={suggestion:"bg-purple-100 text-purple-800",bug:"bg-red-100 text-red-800",feature:"bg-blue-100 text-blue-800",question:"bg-gray-100 text-gray-800",other:"bg-gray-100 text-gray-800"},l={suggestion:u("tickets.suggestion"),bug:u("tickets.bug"),feature:u("tickets.feature"),question:u("tickets.question"),other:u("tickets.other")},(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${n[s]||n.other}`,children:l[s]||s})),(r=e.priority,a={low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"},o={low:u("tickets.lowPriority"),medium:u("tickets.mediumPriority"),high:u("tickets.highPriority"),critical:u("tickets.criticalPriority")},(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a[r]||a.medium}`,children:o[r]||r})),(i=e.status,c={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},d={pending:u("tickets.pending"),in_progress:u("tickets.inProgress"),resolved:u("tickets.resolved"),rejected:u("tickets.rejected")},(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${c[i]||c.pending}`,children:d[i]||i}))]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.userName]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(e=>{if(!e)return"";try{return new Date(e).toLocaleDateString((()=>{switch(x){case"ru":return"ru-RU";case"en":default:return"en-GB";case"uz":return"uz-UZ"}})(),{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return e}})(e.createdAt)]})]})]}),e.userId===g?.uid&&(0,t.jsx)("button",{onClick:()=>P(e.id),className:"text-red-600 hover:text-red-800 p-2",title:u("tickets.delete"),children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},e.id)})})]})})]})]})}e.s(["default",()=>d])}]);